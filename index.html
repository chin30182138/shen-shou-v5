<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¥ç¸ä¸ƒåäºŒå‹äººæ ¼ æ¸¬é©—ï¼‹AIæ™ºèƒ½åˆ†æ</title>
  <meta name="description" content="å…­ç¸äººæ ¼AIåˆ†æï½œé‡‘éŒ¢å¦äº”è¡Œæ•´åˆï½œå³æ™‚é›·é”åœ–ï¼‹æ™ºèƒ½å ±å‘Š" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root { 
      --brand: #b6822b; 
      --primary: #b6822b;
      --secondary: #d4a017;
      --accent: #2b6cb0;
    }
    body { background: radial-gradient(circle at top left, #fffaf4, #f6f3ea); }
    .brand { color: var(--brand); }
    .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    .slider { accent-color: var(--brand); }
    
    /* è¨­å®šé¢æ¿çš„æ»‘å‹•å‹•ç•« */
    .slide-toggle {
        transition: all 0.3s ease-in-out;
        overflow: hidden;
        max-height: 1000px;
    }
    .slide-toggle.hidden {
        max-height: 0;
        padding-top: 0;
        padding-bottom: 0;
        margin-top: 0;
        margin-bottom: 0;
        opacity: 0;
    }

    /* è¼‰å…¥å‹•ç•« */
    .spinner { animation: spin 1.5s linear infinite; display: inline-block; font-size: 2em; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .loading-dots:after { content: '.'; animation: dots 1.5s steps(5, end) infinite; }
    @keyframes dots { 0%, 20% { content: '.'; } 40% { content: '..'; } 60%, 100% { content: '...'; } }
    
    /* é€²åº¦æ¢ */
    .progress-container { width: 100%; background-color: #e5e7eb; border-radius: 10px; margin: 10px 0; overflow: hidden; }
    .progress-bar { height: 8px; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius: 10px; transition: width 0.4s ease; width: 0%; }
    
    /* ç¥ç¸è¶…äººé¡åˆ¥ */
    .superhero-card { 
      border-radius: 12px; 
      padding: 8px; 
      margin: 6px 0; 
      background: linear-gradient(135deg, #e8f4fd, #f0f9ff); 
      border: 2px solid var(--accent); 
    }
    .superhero-title { font-size: 1.2em; font-weight: bold; color: var(--accent); margin-bottom: 4px; }
    .superhero-ability { background: rgba(43, 108, 176, 0.1); padding: 4px; border-radius: 6px; margin: 4px 0; font-weight: bold; color: #2c5282; font-size: 1.0em; }
    .superhero-desc { font-size: 1.0em; color: #666; line-height: 1.3; }
    
    /* è¶…äººåœ–ç‰‡æ¨£å¼ */
    .superhero-image-container {
      width: 150px;
      height: 150px;
      margin: 0 auto 10px;
      border-radius: 12px;
      overflow: hidden;
      border: 3px solid var(--accent);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .superhero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    .superhero-image:hover {
      transform: scale(1.05);
    }
    
    /* å…­ç¸åœ–å®¹å™¨ */
    #beastSVG {
      width: 100%;
      height: 100%;
      position: relative;
    }
    .beast-svg-print {
      display: none;
    }
    
    /* AIåˆ†æå€å¡Š */
    .ai-analysis-section { background: linear-gradient(135deg, #f8f9fa, #ffffff); border: 1px solid #e9ecef; border-radius: 12px; padding: 12px; margin: 8px 0; }
    .ai-analysis-header { display: flex; align-items: center; margin-bottom: 8px; padding-bottom: 6px; border-bottom: 2px solid #e9ecef; }
    .ai-analysis-icon { font-size: 1.5em; margin-right: 8px; }
    .ai-analysis-title { color: #2d3748; font-weight: bold; font-size: 1.2em; }
    .ai-analysis-content { font-size: 1.0em; color: #4a5568; line-height: 1.5; }
    .ai-analysis-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 8px; margin-top: 12px; }
    .ai-analysis-item { background: white; padding: 8px; border-radius: 6px; border-left: 4px solid var(--brand); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
    .ai-analysis-item-title { font-weight: bold; color: #2d3748; margin-bottom: 4px; font-size: 1.0em; }
    .ai-analysis-item-content { font-size: 0.95em; color: #718096; line-height: 1.4; }
    
    /* è¼‰å…¥ç‹€æ…‹ */
    .ai-loading { text-align: center; padding: 20px; color: #718096; background: linear-gradient(135deg, #f8f9fa, #ffffff); border-radius: 12px; border: 2px dashed #e5e7eb; }

    /* è‰²ç³»é è¦½å€å¡Š */
    .color-preview {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    .color-sample {
      width: 30px;
      height: 30px;
      border-radius: 6px;
      border: 2px solid #e5e7eb;
      cursor: pointer;
    }
    .color-sample.active {
      border-color: #333;
      transform: scale(1.1);
    }

    /* é‡æ–°è¨­è¨ˆçš„åˆ—å°æ¨™é ­ - ç°¡æ½”å°ˆæ¥­ */
    .print-header {
      display: none;
      margin-bottom: 25px;
      border-bottom: 3px solid #b6822b;
      padding-bottom: 15px;
    }
    
    .print-header-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }
    
    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .print-logo-img {
      width: 65px;
      height: 65px;
      border-radius: 8px;
      border: 2px solid #e5e7eb;
    }
    
    .logo-text {
      display: flex;
      flex-direction: column;
    }
    
    .print-logo-title {
      font-weight: bold;
      font-size: 20px;
      color: #b6822b;
      margin-bottom: 4px;
    }
    
    .print-logo-subtitle {
      font-size: 14px;
      color: #666;
    }
    
    .header-right {
      text-align: right;
      background: #f8f9fa;
      padding: 10px 15px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
    }
    
    .print-qrcode-title {
      font-weight: bold;
      font-size: 14px;
      color: #b6822b;
      margin-bottom: 4px;
    }
    
    .print-qrcode-subtitle {
      font-size: 12px;
      color: #666;
      margin-bottom: 8px;
    }
    
    .print-qrcode-img {
      width: 80px;
      height: 80px;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
    }
    
    .header-title-container {
      text-align: center;
      margin: 15px 0;
      padding: 15px 0;
      border-top: 2px solid #f0f0f0;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .report-main-title {
      font-size: 28px;
      font-weight: bold;
      color: #b6822b;
      margin-bottom: 8px;
    }
    
    .report-subtitle {
      font-size: 18px;
      color: #666;
      margin-bottom: 5px;
    }
    
    .print-date {
      text-align: center;
      font-size: 13px;
      color: #888;
      margin-top: 10px;
    }
    
    .accent-bar {
      height: 4px;
      background: linear-gradient(90deg, #b6822b, #d4a017, #b6822b);
      margin: 10px 0;
      border-radius: 2px;
    }
    
    @media screen {
      #radar { width: 100% !important; height: 300px !important; }
      body { font-size: 16px; }
      h1 { font-size: 2.5em; }
      h2 { font-size: 1.5em; }
      p, li, div { font-size: 1.0em; }
    }
    
    /* åˆ—å°æ¨£å¼ */
    @media print { 
      .no-print { display: none !important; } 
      .print-header { 
        display: block !important; 
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
      }
      body { 
        background: white !important; 
        font-size: 14px !important; 
        color: black !important; 
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
      }
      .card {
        box-shadow: none;
        border: 1px solid #ddd;
      }
      #beastSVG svg {
        width: 100% !important;
        height: auto !important;
      }
      .accent-bar {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
      }
    }
  </style>
</head>
<body class="text-slate-800">
<main class="max-w-5xl mx-auto p-4 sm:p-6">
  <header class="mb-4 flex justify-between items-center no-print">
    <div class="flex items-center gap-3">
      <img src="img/logo.png" class="h-10 w-auto rounded" alt="ä»™äººæŒ‡è·¯ Logo" />
      <div>
        <h1 class="text-2xl sm:text-3xl font-extrabold brand">ç¥ç¸ä¸ƒåäºŒå‹äººæ ¼ æ¸¬é©—ï¼‹AIæ™ºèƒ½åˆ†æ</h1>
        <p class="text-sm text-slate-600">å…­ç¸é›·é”åœ–ãƒ»ä¸»å‹è§£æãƒ»ä¸‰æ¬„å»ºè­°ãƒ»AIåˆ†æå ±å‘Š</p>
      </div>
    </div>
    <button id="toggleSettingsBtn" type="button" class="no-print p-2 rounded-full hover:bg-amber-100 transition">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-slate-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
    </button>
  </header>

  <!-- è¨­å®šè¡¨å–® -->
  <form id="reportSettingsForm" class="card p-4 mb-4 no-print slide-toggle hidden">
    <h2 class="font-bold mb-3">âš™ï¸ å ±è¡¨è³‡è¨Šè¨­å®š</h2>
    <div class="space-y-4 text-sm">
      <div class="flex items-center gap-4">
        <div>
          <label for="qrCodeUploader" class="font-semibold text-slate-700 block mb-1">ä¸Šå‚³ QR Code åœ–ç‰‡ï¼š</label>
          <input type="file" id="qrCodeUploader" accept="image/*" class="text-slate-600">
        </div>
        <div>
            <label class="font-semibold text-slate-700 block mb-1">åœ–ç‰‡é è¦½ï¼š</label>
            <img id="qrCodePreview" src="https://via.placeholder.com/80x80.png?text=QR+Code" alt="QR Code é è¦½" class="w-20 h-20 border rounded p-1 bg-white object-contain">
        </div>
      </div>
      <div>
        <label for="contactTitle" class="font-semibold text-slate-700">è¯çµ¡æ¨™é¡Œï¼š</label>
        <input type="text" id="contactTitle" class="w-full mt-1 p-2 border rounded" value="æƒç¢¼é ç´„ä¸€å°ä¸€è«®è©¢">
      </div>
      <div>
        <label for="contactLine1" class="font-semibold text-slate-700">è¯çµ¡è³‡è¨Š (ç¬¬ä¸€è¡Œ)ï¼š</label>
        <input type="text" id="contactLine1" class="w-full mt-1 p-2 border rounded" value="Line ID: @immortalguiide">
      </div>
      <div>
        <label for="contactLine2" class="font-semibold text-slate-700">è¯çµ¡è³‡è¨Š (ç¬¬äºŒè¡Œ)ï¼š</label>
        <input type="text" id="contactLine2" class="w-full mt-1 p-2 border rounded" value="å°ˆæ¥­è«®è©¢é ç´„">
      </div>
      
      <!-- è‰²ç³»ä¸»é¡Œè¨­å®š -->
      <div>
        <label class="font-semibold text-slate-700 block mb-2">é¸æ“‡è‰²ç³»ä¸»é¡Œï¼š</label>
        <div class="grid grid-cols-2 gap-3">
          <div>
            <label class="block text-sm mb-1">ä¸»è¦è‰²ç³»ï¼š</label>
            <select id="themeSelect" class="w-full p-2 border rounded">
              <option value="warm">æš–è‰²ç³»</option>
              <option value="cool">å†·è‰²ç³»</option>
              <option value="nature">è‡ªç„¶ç³»</option>
              <option value="modern">ç¾ä»£ç³»</option>
              <option value="classic">ç¶“å…¸ç³»</option>
            </select>
          </div>
          <div>
            <label class="block text-sm mb-1">è‰²èª¿èª¿æ•´ï¼š</label>
            <input type="range" id="hueSlider" min="0" max="360" value="40" class="w-full slider">
            <div class="text-xs text-gray-500 mt-1">è‰²èª¿å€¼: <span id="hueValue">40</span>Â°</div>
          </div>
        </div>
      </div>
    </div>
    <div class="mt-4">
      <button type="submit" class="bg-blue-600 text-white px-5 py-2 rounded hover:bg-blue-700 transition text-sm">å„²å­˜è¨­å®š</button>
    </div>
  </form>

  <!-- æ¸¬é©—è¡¨å–® -->
  <form id="form" class="card p-4 mb-4 no-print">
    <h2 class="font-bold mb-3">ğŸ“‹ è«‹å›ç­”ä¸‹åˆ—30é¡Œï¼ˆ1ï¼ä¸åŒæ„ï¼Œ5ï¼éå¸¸åŒæ„ï¼‰</h2>
    
    <!-- æ€§åˆ¥é¸æ“‡ -->
    <div class="mb-4 p-3 bg-slate-50 rounded-lg">
      <label class="font-semibold text-slate-700 block mb-2">è«‹é¸æ“‡æ‚¨çš„æ€§åˆ¥ï¼š</label>
      <div class="flex gap-4">
        <label class="flex items-center">
          <input type="radio" name="gender" value="male" class="mr-2" checked>
          ç”·æ€§
        </label>
        <label class="flex items-center">
          <input type="radio" name="gender" value="female" class="mr-2">
          å¥³æ€§
        </label>
        <label class="flex items-center">
          <input type="radio" name="gender" value="other" class="mr-2">
          å…¶ä»–
        </label>
      </div>
    </div>
    
    <ol id="qWrap" class="space-y-3"></ol>
    <div class="mt-4 flex gap-3">
      <button type="submit" class="bg-amber-600 text-white px-5 py-2 rounded hover:bg-amber-700 transition">é€å‡ºæ¸¬é©—</button>
      <button type="button" id="btnFillMid" class="border px-3 py-2 rounded hover:bg-gray-50 transition">å…¨éƒ¨å¡«3</button>
    </div>
  </form>

  <!-- é‡æ–°è¨­è¨ˆçš„åˆ—å°æ¨™é ­ - ç°¡æ½”å°ˆæ¥­ -->
  <div class="print-header">
    <div class="print-header-top">
      <div class="header-left">
        <img src="img/logo.png" alt="Logo" class="print-logo-img">
        <div class="logo-text">
            <div class="print-logo-title">ä»™äººæŒ‡è·¯å åœç ”ç©¶å­¸æœƒ</div>
            <div class="print-logo-subtitle">å°ˆæ¥­å‘½ç†è«®è©¢æœå‹™</div>
        </div>
      </div>
      <div class="header-right">
        <div class="print-qrcode-title" id="print-qrcode-title">æƒç¢¼é ç´„ä¸€å°ä¸€è«®è©¢</div>
        <div class="print-qrcode-subtitle" id="print-qrcode-subtitle">Line ID: @immortalguiide</div>
        <img id="print-qrcode-img" src="https://via.placeholder.com/80x80.png?text=QR+Code" alt="QR Code" class="print-qrcode-img">
      </div>
    </div>
    
    <div class="accent-bar"></div>
    
    <div class="header-title-container">
      <h1 class="report-main-title">ä»™äººæŒ‡è·¯ç¥ç¸ä¸ƒåäºŒå‹äººæ ¼</h1>
      <p class="report-subtitle">å€‹äººåŒ–æ·±åº¦åˆ†æå ±å‘Š</p>
      <div class="print-date">å ±å‘Šç”Ÿæˆæ™‚é–“ï¼š<span id="report-date"></span></div>
    </div>
    
    <div class="accent-bar"></div>
  </div>

  <!-- æ¸¬é©—çµæœ -->
  <section id="result" class="grid lg:grid-cols-2 gap-4" style="display: none;">
    <div class="card p-4">
      <h2 class="font-bold mb-2">å…­ç¸èƒ½é‡é›·é”åœ–</h2>
      <div id="radar-container"><canvas id="radar"></canvas></div>
      <button class="mt-3 px-4 py-2 border rounded no-print hover:bg-gray-50 transition" onclick="printAnalysis()">ğŸ–¨ï¸ åˆ—å°åˆ†æå ±å‘Š</button>
    </div>
    <div class="card p-4" id="resultCard">
      <h2 class="font-bold mb-2">ä¸»å‹èˆ‡ä¸‰æ¬„å»ºè­°</h2>
      <div class="grid grid-cols-3 gap-3 items-start">
        <div id="beastSVG" class="w-full aspect-square"></div>
        <div class="col-span-2">
          <div id="mainBeastTitle" class="font-bold brand text-lg"></div>
          <div id="dualHint" class="text-sm text-slate-600 mt-1"></div>
          <div id="mainBeastSummary" class="mt-2 text-sm"></div>
        </div>
      </div>
      <hr class="my-2" />
      <div id="adviceCols" class="grid md:grid-cols-3 gap-2 text-sm"></div>
      <div class="mt-3 flex gap-2 no-print">
        <button id="btnShare" class="px-4 py-2 border rounded hover:bg-gray-50 transition">åˆ†äº«çµæœåœ–ç‰‡</button>
        <button class="px-4 py-2 border rounded hover:bg-gray-50 transition" onclick="printAnalysis()">ğŸ–¨ï¸ åˆ—å°åˆ†æå ±å‘Š</button>
      </div>
    </div>
  </section>

  <!-- è¶…äººå ±å‘Š -->
  <section class="card p-4 mt-4" id="superheroReport" style="display: none;">
    <h2 class="font-bold mb-2">ğŸ¦¸â€â™‚ï¸ ä½ çš„ç¥ç¸è¶…äººèº«åˆ†</h2>
    <div id="superhero-display" class="superhero-card">
      <div class="superhero-image-container">
        <img id="superhero-image" src="" alt="ç¥ç¸è¶…äººåœ–ç‰‡" class="superhero-image">
      </div>
      <div id="superhero-name" class="superhero-title"></div>
      <div id="superhero-ability" class="superhero-ability"></div>
      <div id="superhero-mission" class="superhero-desc"></div>
      <div id="superhero-local" class="text-sm mt-2 font-bold text-blue-700"></div>
    </div>
  </section>

  <!-- AIå ±å‘Š -->
  <section class="card p-4 mt-4" id="aiReport" style="display: none;">
    <h2 class="font-bold mb-2">ğŸ¤– AI æ™ºèƒ½å€‹äººåŒ–åˆ†æå ±å‘Š</h2>
    <p class="text-sm text-slate-600 mb-2">ä»¥ä¸‹å…§å®¹ç”±ä»™äººæŒ‡è·¯AIç³»çµ±ç”Ÿæˆï¼Œèåˆé‡‘éŒ¢å¦ã€äº”è¡Œã€åœ°æ”¯èˆ‡å¿ƒç†è¦–è§’ã€‚</p>
    <div id="ai-analysis-structured">
      <div class="ai-loading" id="ai-loading" style="display: none;">
        <div class="spinner">ğŸ”®</div>
        <p class="mt-2 text-lg font-semibold">AI æ­£åœ¨ç‚ºæ‚¨æ·±åº¦åˆ†æä¸­<span class="loading-dots"></span></p>
        <p class="mt-1 text-sm text-gray-600">é€™å¯èƒ½éœ€è¦ 10-20 ç§’ï¼Œè«‹ç¨å€™</p>
        <div class="progress-container mt-3"><div class="progress-bar" id="progress-bar"></div></div>
        <div class="mt-2 text-xs text-gray-500" id="loading-step">åˆå§‹åŒ–åˆ†æå¼•æ“...</div>
      </div>
      <div id="ai-analysis-content">
        <div class="ai-analysis-section">
          <div class="ai-analysis-header"><div class="ai-analysis-icon">ğŸ­</div><div class="ai-analysis-title">äººæ ¼ç‰¹è³ªåˆ†æ</div></div>
          <div class="ai-analysis-content" id="ai-personality"><div class="text-gray-500 text-center py-3">é»æ“Šã€Œç”Ÿæˆæ·±åº¦åˆ†æã€ç²å–è©³ç´°è§£æ</div></div>
        </div>
        <div class="ai-analysis-section">
          <div class="ai-analysis-header"><div class="ai-analysis-icon">âš¡</div><div class="ai-analysis-title">èƒ½é‡å„ªå‹¢åˆ†æ</div></div>
          <div class="ai-analysis-content" id="ai-strengths"><div class="text-gray-500 text-center py-3">é»æ“Šã€Œç”Ÿæˆæ·±åº¦åˆ†æã€ç²å–è©³ç´°è§£æ</div></div>
        </div>
        <div class="ai-analysis-section">
          <div class="ai-analysis-header"><div class="ai-analysis-icon">ğŸ“ˆ</div><div class="ai-analysis-title">æˆé•·ç™¼å±•å»ºè­°</div></div>
          <div class="ai-analysis-grid">
            <div class="ai-analysis-item"><div class="ai-analysis-item-title">è·å ´ç™¼å±•</div><div class="ai-analysis-item-content" id="ai-career">é»æ“Šã€Œç”Ÿæˆæ·±åº¦åˆ†æã€ç²å–è·å ´å»ºè­°</div></div>
            <div class="ai-analysis-item"><div class="ai-analysis-item-title">äººéš›é—œä¿‚</div><div class="ai-analysis-item-content" id="ai-relationships">é»æ“Šã€Œç”Ÿæˆæ·±åº¦åˆ†æã€ç²å–äººéš›å»ºè­°</div></div>
            <div class="ai-analysis-item"><div class="ai-analysis-item-title">å€‹äººæˆé•·</div><div class="ai-analysis-item-content" id="ai-growth">é»æ“Šã€Œç”Ÿæˆæ·±åº¦åˆ†æã€ç²å–æˆé•·å»ºè­°</div></div>
          </div>
        </div>
        <div class="ai-analysis-section">
          <div class="ai-analysis-header"><div class="ai-analysis-icon">ğŸ’°</div><div class="ai-analysis-title">äº”è¡Œé‡‘éŒ¢å¦è§£æ</div></div>
          <div class="ai-analysis-content" id="ai-money"><div class="text-gray-500 text-center py-3">é»æ“Šã€Œç”Ÿæˆæ·±åº¦åˆ†æã€ç²å–é‡‘éŒ¢å¦è§£æ</div></div>
        </div>
      </div>
    </div>
    <div class="flex gap-2 no-print mt-3">
      <button id="btnAI" class="px-4 py-2 border rounded bg-amber-500 text-white hover:bg-amber-600 transition">ç”Ÿæˆæ·±åº¦åˆ†æ</button>
      <button id="btnRetry" class="px-4 py-2 border rounded bg-gray-200 hover:bg-gray-300 transition" style="display:none;">é‡æ–°åˆ†æ</button>
      <button class="px-4 py-2 border rounded hover:bg-gray-50 transition" onclick="printAnalysis()">ğŸ–¨ï¸ åˆ—å°å®Œæ•´å ±å‘Š</button>
    </div>
  </section>

  <footer class="text-center text-xs text-slate-500 mt-6 no-print">
    <div class="flex justify-center items-center gap-4 mb-1">
      <span>Â© 2025 ä»™äººæŒ‡è·¯å åœç ”ç©¶å­¸æœƒ</span><span>|</span><span>Line: @immortalguiide</span>
    </div>
    <p>æ¸¬é©—åƒ…ä¾›è¦ºå¯Ÿèˆ‡æ•™å­¸ç”¨é€”</p>
  </footer>
</main>

<script>
// ========== åˆå§‹åŒ–è¨­å®š ==========
document.addEventListener('DOMContentLoaded', function() {
  initializeApp();
});

// ========== æ¸¬é©—é¡Œåº« ==========
const BANK = [
  {t: "æˆ‘å¸¸æœ‰çªå¦‚å…¶ä¾†çš„éˆæ„Ÿä¸¦æƒ³ç«‹å³å˜—è©¦ã€‚", b: "é’é¾"},
  {t: "æˆ‘å–œæ­¡æ‰“ç ´å¸¸è¦å°‹æ‰¾æ–°æ–¹æ³•ã€‚", b: "é’é¾"},
  {t: "é‡é˜»åŠ›æ™‚æˆ‘æœƒéˆæ´»è½‰å‘ã€‚", b: "é’é¾"},
  {t: "æˆ‘å¯Œæƒ³åƒåŠ›ï¼Œå–œæ­¡å‰µæ–°æ€è€ƒã€‚", b: "é’é¾"},
  {t: "æˆ‘ç†±æ„›æ¢ç´¢æœªçŸ¥äº‹ç‰©ã€‚", b: "é’é¾"},
  {t: "æˆ‘å–œæ­¡åœ¨äººç¾¤ä¸­è¡¨é”è‡ªå·±ã€‚", b: "æœ±é›€"},
  {t: "æˆ‘ç”¨æƒ…ç·’å¸¶å‹•ä»–äººã€‚", b: "æœ±é›€"},
  {t: "åˆ¥äººçš„åæ‡‰æœƒå½±éŸ¿æˆ‘ã€‚", b: "æœ±é›€"},
  {t: "æˆ‘æ“…é•·èªªæœèˆ‡æ¼”èªªã€‚", b: "æœ±é›€"},
  {t: "æˆ‘é‡è¦–è¢«å‚¾è½èˆ‡é—œæ³¨ã€‚", b: "æœ±é›€"},
  {t: "æˆ‘å–œæ­¡æŒ‰è¨ˆç•«è¡Œäº‹ã€‚", b: "å‹¾é™³"},
  {t: "æˆ‘é‡è¦–å®‰å…¨æ„Ÿèˆ‡ç©©å®šã€‚", b: "å‹¾é™³"},
  {t: "æˆ‘è²¬ä»»æ„Ÿå¼·ã€‚", b: "å‹¾é™³"},
  {t: "æˆ‘å‚¾å‘ç¶­æŒç¾ç‹€ã€‚", b: "å‹¾é™³"},
  {t: "æˆ‘æ³¨é‡ç´°ç¯€èˆ‡ç¨‹åºã€‚", b: "å‹¾é™³"},
  {t: "æˆ‘å°ä»–äººæƒ…ç·’å¾ˆæ•æ„Ÿã€‚", b: "è£è›‡"},
  {t: "æˆ‘æ“…é•·è§€å¯Ÿèˆ‡å‚¾è½ã€‚", b: "è£è›‡"},
  {t: "æˆ‘å¸¸æ€è€ƒèƒŒå¾Œçš„å‹•æ©Ÿã€‚", b: "è£è›‡"},
  {t: "æˆ‘æ€è€ƒäº‹æƒ…æœƒè€ƒé‡æ™‚æ©Ÿèˆ‡äººå¿ƒã€‚", b: "è£è›‡"},
  {t: "æˆ‘å–„æ–¼å”èª¿ä¸åŒè§€é»ã€‚", b: "è£è›‡"},
  {t: "æˆ‘è¬›æ±‚æ•ˆç‡èˆ‡çµæœã€‚", b: "ç™½è™"},
  {t: "æˆ‘æœƒä¸»å‹•åšæ±ºç­–ã€‚", b: "ç™½è™"},
  {t: "æˆ‘ä»¥æ•¸æ“šèˆ‡æˆæœç‚ºå°å‘ã€‚", b: "ç™½è™"},
  {t: "æˆ‘é¡˜æ„æ‰¿æ“”å£“åŠ›ä»¥å®Œæˆä»»å‹™ã€‚", b: "ç™½è™"},
  {t: "æˆ‘åå¥½æ˜ç¢ºçš„è¦ç¯„èˆ‡æ¨™æº–ã€‚", b: "ç™½è™"},
  {t: "æˆ‘å–œæ­¡ç¨è‡ªæ€è€ƒã€‚", b: "ç„æ­¦"},
  {t: "æˆ‘å‚¾å‘è¬¹æ…è©•ä¼°å¾Œè¡Œå‹•ã€‚", b: "ç„æ­¦"},
  {t: "æˆ‘æ“…é•·è¦åŠƒé•·é ç›®æ¨™ã€‚", b: "ç„æ­¦"},
  {t: "æˆ‘é‡è¦–é‚è¼¯èˆ‡åˆ†æã€‚", b: "ç„æ­¦"},
  {t: "æˆ‘ç¿’æ…£å†·éœçœ‹å¾…å•é¡Œã€‚", b: "ç„æ­¦"}
];

// ========== è¶…äººé¡¯ç¤ºè³‡æ–™ ==========
const superheroData = {
  'é’é¾': {
    male: { 
      name:'å‰µæ„é£›é¾è¶…äºº', 
      ability:'ğŸ¦¸â€â™‚ï¸ è¶…èƒ½åŠ›ï¼šéˆæ„Ÿçˆ†ç™¼ + å¿«é€Ÿæ‡‰è®Š + çªç ´æ¡†æ¶', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šå‰µæ–°å°ˆæ¡ˆç™¼èµ·äººã€å±æ©Ÿè™•ç†å°ˆå®¶ã€æ–°é ˜åŸŸé–‹æ‹“è€…', 
      localName:'å°ç£é»å­ç‹', 
      description:'ä½ å°±åƒå°ç£çš„å‰µæ–°å¼•æ“ï¼Œç¸½èƒ½æƒ³å‡ºè®“äººé©šè‰·çš„é»å­ï¼',
      image: 'img/qinglong-male.png'
    },
    female: { 
      name:'å‰µæ„é£›é¾å¥³ä¿ ', 
      ability:'ğŸ¦¸â€â™€ï¸ è¶…èƒ½åŠ›ï¼šéˆæ„Ÿçˆ†ç™¼ + ç›´è¦ºæ´å¯Ÿ + è·¨ç•Œèåˆ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šå‰µæ„ç­–åŠƒå¸«ã€åœ˜éšŠå”èª¿è€…ã€ç¾æ„Ÿå¼•å°è€…', 
      localName:'å°ç£å‰µæ„å¥³ç¥', 
      description:'ä½ æ˜¯å°ç£çš„å‰µæ„å¥³ç¥ï¼Œç¸½èƒ½å°‡éˆæ„Ÿè½‰åŒ–ç‚ºå‹•äººçš„ä½œå“ï¼',
      image: 'img/qinglong-female.png'
    },
    other: { 
      name:'å‰µæ„é£›é¾ä½¿è€…', 
      ability:'ğŸ¦¸ è¶…èƒ½åŠ›ï¼šéˆæ„Ÿçˆ†ç™¼ + å¤šå…ƒè¦–è§’ + è·¨ç•Œé€£çµ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šå‰µæ„æ©‹æ¨‘ã€å¤šå…ƒæ–‡åŒ–èåˆè€…ã€å‰µæ–°å‚¬åŒ–åŠ‘', 
      localName:'å°ç£å‰µæ„å¤§ä½¿', 
      description:'ä½ æ˜¯å°ç£çš„å‰µæ„å¤§ä½¿ï¼Œç”¨å¤šå…ƒè¦–è§’é€£çµä¸åŒé ˜åŸŸï¼',
      image: 'img/qinglong-male.png'
    }
  },
  'æœ±é›€': {
    male: { 
      name:'ç†±æƒ…é³³å‡°è¶…äºº', 
      ability:'ğŸ¦¸â€â™‚ï¸ è¶…èƒ½åŠ›ï¼šæ„ŸæŸ“åŠ›å ´ + æºé€šå¤§å¸« + æ¿€å‹µå…‰ç’°', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šåœ˜éšŠå£«æ°£å……é›»ç«™ã€å…¬é—œæºé€šé”äººã€æ•™è‚²æ¨å»£å…ˆé‹’', 
      localName:'å°ç£ç†±æƒ…å¤§ä½¿', 
      description:'ä½ æ˜¯å°ç£çš„äººæ°£ç‹ï¼Œç”¨ç†±æƒ…æ„ŸæŸ“èº«é‚Šçš„æ¯ä¸€å€‹äººï¼',
      image: 'img/zhuque-male.png'
    },
    female: { 
      name:'ç†±æƒ…é³³å‡°å¥³ä¿ ', 
      ability:'ğŸ¦¸â€â™€ï¸ è¶…èƒ½åŠ›ï¼šæƒ…æ„Ÿå…±é³´ + æºé€šè—è¡“ + æº«æš–ç™‚ç™’', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šæƒ…æ„Ÿæ”¯æŒè€…ã€åœ˜éšŠå‡èšè€…ã€å¿ƒéˆç™‚ç™’å¸«', 
      localName:'å°ç£æš–å¿ƒå¤©ä½¿', 
      description:'ä½ æ˜¯å°ç£çš„æš–å¿ƒå¤©ä½¿ï¼Œç”¨çœŸèª èˆ‡æº«æš–ç…§äº®ä»–äººï¼',
      image: 'img/zhuque-female.png'
    },
    other: { 
      name:'ç†±æƒ…é³³å‡°ä½¿è€…', 
      ability:'ğŸ¦¸ è¶…èƒ½åŠ›ï¼šæƒ…æ„Ÿé€£çµ + å¤šå…ƒæºé€š + ç¤¾ç¾¤å‡èš', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šç¤¾ç¾¤æ©‹æ¨‘ã€æƒ…æ„Ÿæ”¯æŒè€…ã€å¤šå…ƒæ–‡åŒ–æ¨å»£è€…', 
      localName:'å°ç£æƒ…æ„Ÿé€£çµè€…', 
      description:'ä½ æ˜¯å°ç£çš„æƒ…æ„Ÿé€£çµè€…ï¼Œç”¨çœŸèª é€£çµä¸åŒçš„å¿ƒéˆï¼',
      image: 'img/zhuque-male.png'
    }
  },
  'å‹¾é™³': {
    male: { 
      name:'ç©©å›ºåŸç‰†è¶…äºº', 
      ability:'ğŸ¦¸â€â™‚ï¸ è¶…èƒ½åŠ›ï¼šå¯é é˜²è­· + ç´°ç¯€æŒæ§ + åŸ·è¡ŒåŠ›å ´', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šç³»çµ±ç©©å®šå®ˆè­·è€…ã€å“è³ªæŠŠé—œå°ˆå®¶ã€é•·æœŸè¦åŠƒå¸«', 
      localName:'å°ç£åœ°åŸºä¸»', 
      description:'ä½ æ˜¯å°ç£çš„ç©©å®šåŠ›é‡ï¼Œåƒå …å›ºçš„åœ°åŸºä¸€æ¨£å¯é ï¼',
      image: 'img/gouchen-male.png'
    },
    female: { 
      name:'ç©©å›ºåŸç‰†å¥³ä¿ ', 
      ability:'ğŸ¦¸â€â™€ï¸ è¶…èƒ½åŠ›ï¼šç´°å¿ƒå®ˆè­· + çµ„ç¹”å”èª¿ + ç©©å®šæ”¯æŒ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šç³»çµ±ç¶­è­·è€…ã€å“è³ªå®ˆè­·è€…ã€åœ˜éšŠç©©å®šåŠ‘', 
      localName:'å°ç£å®ˆè­·å¤©ä½¿', 
      description:'ä½ æ˜¯å°ç£çš„å®ˆè­·å¤©ä½¿ï¼Œç”¨ç´°å¿ƒèˆ‡ç©©å®šæ”¯æŒè‘—æ¯å€‹äººï¼',
      image: 'img/gouchen-female.png'
    },
    other: { 
      name:'ç©©å›ºåŸç‰†ä½¿è€…', 
      ability:'ğŸ¦¸ è¶…èƒ½åŠ›ï¼šç³»çµ±æ€ç¶­ + ç©©å®šå»ºæ§‹ + å¤šå…ƒå”èª¿', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šç³»çµ±æ¶æ§‹å¸«ã€ç©©å®šç¶­è­·è€…ã€å¤šå…ƒå”èª¿è€…', 
      localName:'å°ç£ç³»çµ±å®ˆè­·è€…', 
      description:'ä½ æ˜¯å°ç£çš„ç³»çµ±å®ˆè­·è€…ï¼Œç”¨ç©©å®šçš„åŠ›é‡å»ºæ§‹æ›´å¥½çš„ç’°å¢ƒï¼',
      image: 'img/gouchen-male.png'
    }
  },
  'è£è›‡': {
    male: { 
      name:'æ´å¯Ÿéˆè›‡è¶…äºº', 
      ability:'ğŸ¦¸â€â™‚ï¸ è¶…èƒ½åŠ›ï¼šè®€å¿ƒæ„ŸçŸ¥ + å”èª¿åŠ›å ´ + æ™‚æ©ŸæŒæ§', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šäººéš›é—œä¿‚èª¿è§£å“¡ã€ç­–ç•¥åˆ†æå¸«ã€å±æ©Ÿé è­¦ç³»çµ±', 
      localName:'å°ç£å’Œäº‹ä½¬', 
      description:'ä½ æ˜¯å°ç£çš„äººéš›é›·é”ï¼Œç¸½èƒ½æ´å¯Ÿäººå¿ƒã€åŒ–è§£è¡çªï¼',
      image: 'img/tengshe-male.png'
    },
    female: { 
      name:'æ´å¯Ÿéˆè›‡å¥³ä¿ ', 
      ability:'ğŸ¦¸â€â™€ï¸ è¶…èƒ½åŠ›ï¼šç›´è¦ºæ„ŸçŸ¥ + æƒ…æ„Ÿå”èª¿ + æ™‚æ©Ÿæ´å¯Ÿ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šæƒ…æ„Ÿèª¿è§£å¸«ã€åœ˜éšŠæ½¤æ»‘åŠ‘ã€å±æ©Ÿé é˜²å°ˆå®¶', 
      localName:'å°ç£å¿ƒéˆå°å¸«', 
      description:'ä½ æ˜¯å°ç£çš„å¿ƒéˆå°å¸«ï¼Œç”¨ç›´è¦ºèˆ‡æ™ºæ…§å¼•å°ä»–äººï¼',
      image: 'img/tengshe-female.png'
    },
    other: { 
      name:'æ´å¯Ÿéˆè›‡ä½¿è€…', 
      ability:'ğŸ¦¸ è¶…èƒ½åŠ›ï¼šå¤šå…ƒæ„ŸçŸ¥ + é—œä¿‚å”èª¿ + æ™‚æ©Ÿåˆ¤æ–·', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šé—œä¿‚æ©‹æ¨‘ã€å¤šå…ƒå”èª¿è€…ã€æ™‚æ©Ÿåˆ†æå¸«', 
      localName:'å°ç£å”èª¿å°ˆå®¶', 
      description:'ä½ æ˜¯å°ç£çš„å”èª¿å°ˆå®¶ï¼Œç”¨æ™ºæ…§é€£çµä¸åŒçš„äººéš›ç¶²çµ¡ï¼',
      image: 'img/tengshe-male.png'
    }
  },
  'ç™½è™': {
    male: { 
      name:'ç–¾é¢¨æˆ°ç¥è¶…äºº', 
      ability:'ğŸ¦¸â€â™‚ï¸ è¶…èƒ½åŠ›ï¼šæ±ºæ–·åŠ›å ´ + è¡Œå‹•åŠ é€Ÿ + ç›®æ¨™é–å®š', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šç·Šæ€¥æ•‘æ´éšŠé•·ã€å°ˆæ¡ˆé ˜å°è€…ã€æ•ˆç‡å„ªåŒ–å¸«', 
      localName:'å°ç£æ€¥å…ˆé‹’', 
      description:'ä½ æ˜¯å°ç£çš„è¡Œå‹•æ´¾ï¼Œåƒç–¾é¢¨ä¸€æ¨£å¿«é€Ÿè§£æ±ºå•é¡Œï¼',
      image: 'img/baihu-male.png'
    },
    female: { 
      name:'ç–¾é¢¨æˆ°ç¥å¥³ä¿ ', 
      ability:'ğŸ¦¸â€â™€ï¸ è¶…èƒ½åŠ›ï¼šæœæ–·æ±ºç­– + é«˜æ•ˆåŸ·è¡Œ + ç›®æ¨™é”æˆ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šå±æ©Ÿè™•ç†å°ˆå®¶ã€æ•ˆç‡é ˜å°è€…ã€ç›®æ¨™é”æˆå¸«', 
      localName:'å°ç£è¡Œå‹•å¥³ç¥', 
      description:'ä½ æ˜¯å°ç£çš„è¡Œå‹•å¥³ç¥ï¼Œç”¨æ•ˆç‡èˆ‡æ±ºæ–·åŠ›å®Œæˆä»»å‹™ï¼',
      image: 'img/baihu-female.png'
    },
    other: { 
      name:'ç–¾é¢¨æˆ°ç¥ä½¿è€…', 
      ability:'ğŸ¦¸ è¶…èƒ½åŠ›ï¼šå¤šå…ƒæ±ºç­– + é«˜æ•ˆå”èª¿ + ç›®æ¨™ç®¡ç†', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šæ•ˆç‡å”èª¿è€…ã€å¤šå…ƒé ˜å°è€…ã€ç›®æ¨™ç®¡ç†å¸«', 
      localName:'å°ç£æ•ˆç‡å°ˆå®¶', 
      description:'ä½ æ˜¯å°ç£çš„æ•ˆç‡å°ˆå®¶ï¼Œç”¨å¤šå…ƒè¦–è§’é”æˆç›®æ¨™ï¼',
      image: 'img/baihu-male.png'
    }
  },
  'ç„æ­¦': {
    male: { 
      name:'æ™ºæ…§é¾œä»™è¶…äºº', 
      ability:'ğŸ¦¸â€â™‚ï¸ è¶…èƒ½åŠ›ï¼šæ·±åº¦æ€è€ƒ + ç­–ç•¥è¦åŠƒ + å†·éœå±éšœ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šé•·é è¦åŠƒå¸«ã€æŠ€è¡“ç ”ç™¼å°ˆå®¶ã€æ™ºæ…§æ±ºç­–é¡§å•', 
      localName:'å°ç£è«¸è‘›äº®', 
      description:'ä½ æ˜¯å°ç£çš„æ™ºæ…§å¯¶åº«ï¼Œåƒé¾œç”²ä¸€æ¨£ä¿è­·é‡è¦æ±ºç­–ï¼',
      image: 'img/xuanwu-male.png'
    },
    female: { 
      name:'æ™ºæ…§é¾œä»™å¥³ä¿ ', 
      ability:'ğŸ¦¸â€â™€ï¸ è¶…èƒ½åŠ›ï¼šæ·±åº¦åˆ†æ + ç­–ç•¥æ€è€ƒ + å†·éœæ™ºæ…§', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šç­–ç•¥è¦åŠƒå¸«ã€æ™ºæ…§é¡§å•ã€å†·éœæ±ºç­–è€…', 
      localName:'å°ç£æ™ºæ…§å¥³ç¥', 
      description:'ä½ æ˜¯å°ç£çš„æ™ºæ…§å¥³ç¥ï¼Œç”¨æ·±è¬€é æ…®æŒ‡å¼•æ–¹å‘ï¼',
      image: 'img/xuanwu-female.png'
    },
    other: { 
      name:'æ™ºæ…§é¾œä»™ä½¿è€…', 
      ability:'ğŸ¦¸ è¶…èƒ½åŠ›ï¼šå¤šå…ƒæ€è€ƒ + ç­–ç•¥å”èª¿ + å†·éœåˆ†æ', 
      mission:'ğŸ¯ å°ˆå±¬ä»»å‹™ï¼šæ™ºæ…§æ©‹æ¨‘ã€ç­–ç•¥å”èª¿è€…ã€å¤šå…ƒé¡§å•', 
      localName:'å°ç£æ™ºå›Šåœ˜', 
      description:'ä½ æ˜¯å°ç£çš„æ™ºå›Šåœ˜ï¼Œç”¨å¤šå…ƒæ™ºæ…§è§£æ±ºè¤‡é›œå•é¡Œï¼',
      image: 'img/xuanwu-male.png'
    }
  }
};

function initializeApp() {
  // è¨­å®šå ±å‘Šæ—¥æœŸ
  document.getElementById('report-date').textContent = new Date().toLocaleDateString('zh-TW', { 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric', 
    hour: '2-digit', 
    minute: '2-digit' 
  });

  // åˆå§‹åŒ–æ¸¬é©—é¡Œç›®
  initializeQuestions();
  
  // åˆå§‹åŒ–è¨­å®šé¢æ¿
  initializeSettings();
  
  // åˆå§‹åŒ–äº‹ä»¶ç›£è½å™¨
  initializeEventListeners();
}

// ========== æ¸¬é©—é¡Œç›®åˆå§‹åŒ– ==========
function initializeQuestions() {
  // éš¨æ©Ÿæ’åºé¡Œç›®
  const shuffledBANK = [...BANK].sort(() => 0.5 - Math.random());
  
  const qWrap = document.getElementById("qWrap");
  qWrap.innerHTML = ''; // æ¸…ç©ºç¾æœ‰å…§å®¹
  
  shuffledBANK.forEach((q, i) => {
    qWrap.innerHTML += `<li><p>${i+1}. ${q.t}</p><input type='range' min='1' max='5' value='3' id='q${i}' class='w-full slider'></li>`;
  });
  
  qWrap.innerHTML += '<div id="progress" class="text-right text-sm">0/30</div>';
  
  // æ›´æ–°é€²åº¦é¡¯ç¤º
  document.querySelectorAll('input[type="range"]').forEach(slider => {
    slider.addEventListener('input', () => {
      const answered = Array.from(document.querySelectorAll('input[type="range"]')).filter(s => s.value !== "3").length;
      document.getElementById("progress").textContent = `${answered}/30`;
    });
  });
}

// ========== è¨­å®šé¢æ¿åˆå§‹åŒ– ==========
function initializeSettings() {
  const savedSettings = JSON.parse(localStorage.getItem('reportContactSettings') || '{}');
  
  // è¨­å®šè¡¨å–®å€¼
  document.getElementById('contactTitle').value = savedSettings.title || 'æƒç¢¼é ç´„ä¸€å°ä¸€è«®è©¢';
  document.getElementById('contactLine1').value = savedSettings.line1 || 'Line ID: @immortalguiide';
  document.getElementById('contactLine2').value = savedSettings.line2 || 'å°ˆæ¥­è«®è©¢é ç´„';
  document.getElementById('themeSelect').value = savedSettings.theme || 'warm';
  document.getElementById('hueSlider').value = savedSettings.hue || 40;
  document.getElementById('hueValue').textContent = savedSettings.hue || 40;
  
  // QR Code åœ–ç‰‡
  const qrCodePreview = document.getElementById('qrCodePreview');
  if (savedSettings.qrDataUrl) {
    qrCodePreview.src = savedSettings.qrDataUrl;
  }
  
  // æ›´æ–°åˆ—å°æ¨™é ­
  updatePrintHeader();
  
  // æ‡‰ç”¨ä¸»é¡Œ
  applyTheme(savedSettings.theme || 'warm', savedSettings.hue || 40);
  
  // QR Code ä¸Šå‚³è™•ç†
  document.getElementById('qrCodeUploader').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(e) {
        qrCodePreview.src = e.target.result;
        updatePrintHeader();
      };
      reader.readAsDataURL(file);
    }
  });
}

// æ›´æ–°åˆ—å°æ¨™é ­
function updatePrintHeader() {
  const savedSettings = JSON.parse(localStorage.getItem('reportContactSettings') || '{}');
  
  document.getElementById('print-qrcode-title').textContent = savedSettings.title || 'æƒç¢¼é ç´„ä¸€å°ä¸€è«®è©¢';
  document.getElementById('print-qrcode-subtitle').textContent = savedSettings.line1 || 'Line ID: @immortalguiide';
  
  const qrCodeImg = document.getElementById('print-qrcode-img');
  if (savedSettings.qrDataUrl) {
    qrCodeImg.src = savedSettings.qrDataUrl;
  }
}

// ========== äº‹ä»¶ç›£è½å™¨åˆå§‹åŒ– ==========
function initializeEventListeners() {
  // è¨­å®šé¢æ¿é–‹é—œ
  document.getElementById('toggleSettingsBtn').addEventListener('click', function() {
    const settingsPanel = document.getElementById('reportSettingsForm');
    settingsPanel.classList.toggle('hidden');
  });
  
  // è¨­å®šè¡¨å–®æäº¤
  document.getElementById('reportSettingsForm').addEventListener('submit', function(e) {
    e.preventDefault();
    saveSettings();
  });
  
  // è‰²èª¿æ»‘æ¡¿
  document.getElementById('hueSlider').addEventListener('input', function() {
    document.getElementById('hueValue').textContent = this.value;
    applyTheme(document.getElementById('themeSelect').value, this.value);
  });
  
  // ä¸»é¡Œé¸æ“‡
  document.getElementById('themeSelect').addEventListener('change', function() {
    applyTheme(this.value, document.getElementById('hueSlider').value);
  });
  
  // æ¸¬é©—è¡¨å–®æäº¤
  document.getElementById('form').addEventListener('submit', function(e) {
    e.preventDefault();
    submitQuiz();
  });
  
  // å…¨éƒ¨å¡«3æŒ‰éˆ•
  document.getElementById('btnFillMid').addEventListener('click', function() {
    document.querySelectorAll('input[type="range"]').forEach(slider => {
      slider.value = 3;
    });
    // æ›´æ–°é€²åº¦
    const answered = Array.from(document.querySelectorAll('input[type="range"]')).filter(s => s.value !== "3").length;
    document.getElementById("progress").textContent = `${answered}/30`;
  });
  
  // AIåˆ†ææŒ‰éˆ•
  document.getElementById('btnAI').addEventListener('click', function() {
    generateAIAnalysis();
  });
  
  // åˆ†äº«æŒ‰éˆ•
  document.getElementById('btnShare').addEventListener('click', function() {
    shareResult();
  });
}

// ========== è¨­å®šç›¸é—œå‡½æ•¸ ==========
function saveSettings() {
  const settings = {
    qrDataUrl: document.getElementById('qrCodePreview').src,
    title: document.getElementById('contactTitle').value,
    line1: document.getElementById('contactLine1').value,
    line2: document.getElementById('contactLine2').value,
    theme: document.getElementById('themeSelect').value,
    hue: document.getElementById('hueSlider').value
  };
  
  localStorage.setItem('reportContactSettings', JSON.stringify(settings));
  updatePrintHeader();
  alert('è¨­å®šå·²å„²å­˜ï¼');
}

// è‰²ç³»ä¸»é¡Œ
const colorThemes = {
  warm: { primary: '#b6822b', secondary: '#d4a017', accent: '#2b6cb0', background: 'radial-gradient(circle at top left, #fffaf4, #f6f3ea)' },
  cool: { primary: '#2b6cb0', secondary: '#3182ce', accent: '#b6822b', background: 'radial-gradient(circle at top left, #e8f4fd, #f0f9ff)' },
  nature: { primary: '#38a169', secondary: '#48bb78', accent: '#2b6cb0', background: 'radial-gradient(circle at top left, #f0fff4, #e6fffa)' },
  modern: { primary: '#4a5568', secondary: '#718096', accent: '#b6822b', background: 'radial-gradient(circle at top left, #f7fafc, #edf2f7)' },
  classic: { primary: '#744210', secondary: '#975a16', accent: '#2b6cb0', background: 'radial-gradient(circle at top left, #fefcbf, #faf089)' }
};

function applyTheme(theme, hue) {
  const root = document.documentElement;
  const themeColors = colorThemes[theme];
  
  // ç°¡å–®çš„è‰²èª¿èª¿æ•´
  const adjustColor = (color) => {
    return `hsl(${hue}, 70%, 45%)`;
  };
  
  const primary = adjustColor(themeColors.primary);
  const secondary = adjustColor(themeColors.secondary);
  
  root.style.setProperty('--brand', primary);
  root.style.setProperty('--primary', primary);
  root.style.setProperty('--secondary', secondary);
  root.style.setProperty('--accent', themeColors.accent);
  
  document.body.style.background = themeColors.background;
  
  // æ›´æ–°é€²åº¦æ¢
  const progressBar = document.querySelector('.progress-bar');
  if (progressBar) {
    progressBar.style.background = `linear-gradient(90deg, ${primary}, ${secondary})`;
  }
}

// ========== æ¸¬é©—ç›¸é—œå‡½æ•¸ ==========
function submitQuiz() {
  const scores = {é’é¾:0, æœ±é›€:0, å‹¾é™³:0, è£è›‡:0, ç™½è™:0, ç„æ­¦:0};
  
  // è¨ˆç®—åˆ†æ•¸
  for (let i = 0; i < 30; i++) {
    const slider = document.getElementById(`q${i}`);
    if (slider) {
      const question = BANK[i];
      scores[question.b] += parseInt(slider.value);
    }
  }
  
  const summary = summarize(scores);
  window.currentBeastType = summary.top;
  
  // é¡¯ç¤ºçµæœ
  renderRadar(scores);
  renderReport(summary, scores);
  
  // å„²å­˜çµæœ
  const gender = document.querySelector('input[name="gender"]:checked').value;
  localStorage.setItem("shen-shou-result", JSON.stringify({
    scores: scores,
    summary: summary,
    gender: gender
  }));
  
  document.getElementById("result").style.display = "grid";
  document.getElementById("aiReport").style.display = "block";
  
  showSuperhero(summary.top);
}

function summarize(scores) {
  const entries = Object.entries(scores).sort((a, b) => b[1] - a[1]);
  const top = entries[0];
  const secondary = entries[1];
  const dual = top[1] - secondary[1] <= 2 ? [top[0], secondary[0]] : null;
  
  const total = Object.values(scores).reduce((sum, score) => sum + score, 0);
  const variantIndex = total % 12;
  const variants = ["å­","ä¸‘","å¯…","å¯","è¾°","å·³","åˆ","æœª","ç”³","é…‰","æˆŒ","äº¥"];
  
  return {
    top: top[0],
    dual: dual,
    ranking: entries,
    variant: variants[variantIndex],
    total: total,
    scores: scores
  };
}

// ========== æ¸²æŸ“å‡½æ•¸ ==========
let radarChart = null;

function renderRadar(scores) {
  const canvas = document.getElementById("radar");
  if (radarChart) {
    radarChart.destroy();
  }
  
  radarChart = new Chart(canvas, {
    type: "radar",
    data: {
      labels: Object.keys(scores),
      datasets: [{
        label: "å…­ç¸èƒ½é‡",
        data: Object.values(scores),
        backgroundColor: "rgba(182,130,43,0.15)",
        borderColor: "#b6822b",
        pointBackgroundColor: "#b6822b",
        pointBorderColor: "#fff",
        pointHoverBackgroundColor: "#fff",
        pointHoverBorderColor: "#b6822b"
      }]
    },
    options: {
      scales: {
        r: {
          beginAtZero: true,
          max: 25,
          ticks: {
            stepSize: 5
          }
        }
      },
      plugins: {
        legend: {
          display: false
        }
      },
      maintainAspectRatio: false
    }
  });
}

function renderReport(summary, scores) {
  // é¡¯ç¤ºå…­ç¸åœ–
  document.getElementById("beastSVG").innerHTML = beastSVG(summary.top);
  
  // é¡¯ç¤ºä¸»å‹è³‡è¨Š
  document.getElementById("mainBeastTitle").textContent = summary.dual ? 
    `é›™ç¸${summary.variant}å‹ï¼š${summary.top} Ã— ${summary.dual[1]}` : 
    `ä¸»${summary.variant}å‹ï¼š${summary.top}`;
  
  document.getElementById("dualHint").textContent = summary.dual ? 
    `ç¬¬äºŒä¸»å°èƒ½é‡ï¼š${summary.dual[1]}` : "";
  
  document.getElementById("mainBeastSummary").textContent = 
    `ä½ çš„ä¸»å‹ç‚º ${summary.top}${summary.variant}å‹ï¼Œèåˆ${summary.top}èƒ½é‡èˆ‡${summary.variant}åœ°æ”¯ç‰¹è³ªã€‚`;
  
  // é¡¯ç¤ºå»ºè­°
  const advice = generateAdvice(summary.top, summary.dual ? summary.dual[1] : null, scores, summary.variant);
  
  const adviceHTML = (title, items) => 
    `<div class='border rounded p-2'><b>${title}</b><ul class='list-disc pl-5'>${items.map(item => `<li>${item}</li>`).join("")}</ul></div>`;
  
  document.getElementById("adviceCols").innerHTML = 
    adviceHTML("è·å ´å»ºè­°", advice.è·å ´) +
    adviceHTML("æ„Ÿæƒ…å»ºè­°", advice.æ„Ÿæƒ…) +
    adviceHTML("é¤Šç”Ÿå»ºè­°", advice.é¤Šç”Ÿ);
}

// ========== ç¥ç¸SVG ==========
function beastSVG(beast) {
  const color = "#B6822B";
  const fill = "none";
  const path = d => `<path d='${d}' fill='${fill}' stroke='${color}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/>`;
  const wrap = content => `<svg viewBox='0 0 100 100' class='w-full h-auto' xmlns='http://www.w3.org/2000/svg'>
    <defs><radialGradient id='g' cx='50%' cy='50%' r='60%'>
      <stop offset='0%' stop-color='rgba(182,130,43,0.25)'/><stop offset='100%' stop-color='rgba(182,130,43,0)'/>
    </radialGradient></defs><rect width='100' height='100' fill='url(#g)'/>${content}</svg>`;
  
  switch(beast) {
    case "é’é¾": return wrap(
      path("M15 60 C25 40, 45 35, 55 45 C65 55, 75 35, 85 45 M45 45 q5 -12 16 -10 m-6 6 l6 4 m-36 20 q10 -6 18 2 m12 -2 q8 -6 18 2") +
      path("M30 70 q10 8 20 0 q10 -8 20 0")
    );
    case "æœ±é›€": return wrap(
      path("M20 60 q15 -30 30 -30 q15 0 30 30 M50 30 l0 12 M35 55 q15 -8 30 0 M25 62 q10 8 25 8 q15 0 25 -8")
    );
    case "å‹¾é™³": return wrap(
      path("M20 70 h60 v-20 h-60 v20 z M30 50 v-10 h40 v10 M35 65 h10 M55 65 h10")
    );
    case "è£è›‡": return wrap(
      path("M20 70 q20 -30 40 -10 q10 8 20 -2 q-10 20 -30 10 q-10 -6 -30 2 M60 48 q6 -6 12 0")
    );
    case "ç™½è™": return wrap(
      path("M20 65 q15 -20 30 -20 q15 0 30 20 M30 60 h40 M35 70 h30 M38 52 l4 6 M58 52 l-4 6")
    );
    case "ç„æ­¦": return wrap(
      path("M30 65 q20 15 40 0 q5 -12 -15 -22 q-20 10 -25 22 M55 50 q10 -8 20 2 M25 55 q-8 -6 -10 6")
    );
    default: return wrap("");
  }
}

// ========== å»ºè­°ç”Ÿæˆ ==========
function generateAdvice(mainBeast, secondaryBeast, scores, variant) {
  const adviceBank = {
    é’é¾: {
      è·å ´: ["å‰µæ–°é ˜é ­ï¼Œå‹‡æ–¼å˜—è©¦æ–°æ–¹æ³•","å¸¶é ˜åœ˜éšŠçªç ´å‚³çµ±æ¡†æ¶","é–‹æ‹“æ–°å¸‚å ´æˆ–æ¥­å‹™é ˜åŸŸ","å°‡å‰µæ„è½‰åŒ–ç‚ºå¯¦éš›è¡Œå‹•"],
      æ„Ÿæƒ…: ["ä¿æŒé—œä¿‚ä¸­çš„æ–°é®®æ„Ÿ","å…±åŒæ¢ç´¢æ–°é«”é©—","é–‹æ”¾æºé€šå‰µæ–°æƒ³æ³•","å¹³è¡¡å†’éšªèˆ‡ç©©å®šéœ€æ±‚"],
      é¤Šç”Ÿ: ["æˆ¶å¤–é‹å‹•é‡‹æ”¾èƒ½é‡","å˜—è©¦æ–°çš„é‹å‹•æ–¹å¼","ä¿æŒç”Ÿæ´»å¤šæ¨£æ€§","é©ç•¶å†’éšªæŒ‘æˆ°è‡ªæˆ‘"]
    },
    æœ±é›€: {
      è·å ´: ["ç™¼æ®è¡¨é”èˆ‡æºé€šå„ªå‹¢","æ¿€å‹µåœ˜éšŠå£«æ°£","å»ºç«‹å»£æ³›äººéš›ç¶²çµ¡","å±•ç¾ç†±æƒ…èˆ‡æ„ŸæŸ“åŠ›"],
      æ„Ÿæƒ…: ["çœŸèª è¡¨é”æƒ…æ„Ÿéœ€æ±‚","å‰µé€ æµªæ¼«é©šå–œæ™‚åˆ»","ä¿æŒé—œä¿‚ä¸­çš„ç†±æƒ…","é©åº¦åˆ†äº«å…§å¿ƒæ„Ÿå—"],
      é¤Šç”Ÿ: ["è—è¡“å‰µä½œæŠ’ç™¼æƒ…æ„Ÿ","ç¤¾äº¤æ´»å‹•ä¿æŒæ´»åŠ›","è¡¨é”æ€§é‹å‹•å¦‚èˆè¹ˆ","æ³¨æ„æƒ…ç·’æ³¢å‹•ç®¡ç†"]
    },
    å‹¾é™³: {
      è·å ´: ["å»ºç«‹ç©©å®šå·¥ä½œæµç¨‹","ç¢ºä¿ä»»å‹™æŒ‰æ™‚å®Œæˆ","æ³¨é‡ç´°ç¯€èˆ‡å“è³ª","æä¾›å¯é æ”¯æŒ"],
      æ„Ÿæƒ…: ["å»ºç«‹ä¿¡ä»»èˆ‡å®‰å…¨æ„Ÿ","ä¿æŒæ‰¿è«¾èˆ‡ä¸€è‡´æ€§","ç©©å®šè¡¨é”é—œå¿ƒ","ç‡Ÿé€ æº«é¦¨å®¶åº­æ°›åœ"],
      é¤Šç”Ÿ: ["è¦å¾‹ä½œæ¯ä¿æŒå¹³è¡¡","å‡è¡¡é£²é£Ÿèˆ‡é‹å‹•","å»ºç«‹å¥åº·ç”Ÿæ´»ç¿’æ…£","æ³¨é‡å¯¦éš›é¤Šç”Ÿæ–¹æ³•"]
    },
    è£è›‡: {
      è·å ´: ["ç™¼æ®æ´å¯Ÿèˆ‡å”èª¿èƒ½åŠ›","ç†è§£åœ˜éšŠæˆå“¡éœ€æ±‚","å¦¥å–„è™•ç†äººéš›é—œä¿‚","æŠŠæ¡æ™‚æ©Ÿæ¡å–è¡Œå‹•"],
      æ„Ÿæƒ…: ["æ·±å…¥ç†è§£ä¼´ä¾¶æ„Ÿå—","æ•æ„Ÿé«”è²¼å°æ–¹éœ€æ±‚","å»ºç«‹æ·±åº¦æƒ…æ„Ÿé€£çµ","é©æ™‚è¡¨é”æ”¯æŒ"],
      é¤Šç”Ÿ: ["å†¥æƒ³èˆ‡å…§çœç·´ç¿’","æƒ…ç·’ç®¡ç†èˆ‡é‡‹æ”¾","æº«å’Œèª¿ç†èº«å¿ƒ","æ³¨é‡å¿ƒç†å¹³è¡¡"]
    },
    ç™½è™: {
      è·å ´: ["æœæ–·æ±ºç­–è¿½æ±‚æ•ˆç‡","è¨­å®šæ˜ç¢ºç›®æ¨™","æ‰¿æ“”é ˜å°è²¬ä»»","æ³¨é‡æˆæœèˆ‡ç¸¾æ•ˆ"],
      æ„Ÿæƒ…: ["ç›´æ¥è¡¨é”æ„›èˆ‡æ‰¿è«¾","ä¿è­·èˆ‡æ”¯æŒä¼´ä¾¶","æ˜ç¢ºé—œä¿‚ç•Œç·š","å±•ç¾å …å®šèˆ‡å¿ èª "],
      é¤Šç”Ÿ: ["é«˜å¼·åº¦é‹å‹•é‡‹å£“","æŒ‘æˆ°é«”èƒ½æ¥µé™","åŸ¹é¤Šç´€å¾‹æ€§","æ³¨æ„å£“åŠ›ç®¡ç†"]
    },
    ç„æ­¦: {
      è·å ´: ["ç­–ç•¥è¦åŠƒé•·é ç™¼å±•","æ·±å…¥åˆ†æå•é¡Œæœ¬è³ª","ç¨ç«‹æ€è€ƒèˆ‡åˆ¤æ–·","ä¿æŒç†æ€§èˆ‡å®¢è§€"],
      æ„Ÿæƒ…: ["æ·±åº¦äº¤æµæ€æƒ³","ç†æ€§åˆ†æé—œä¿‚","ä¿æŒå€‹äººç©ºé–“","å»ºç«‹æ™ºæ…§é€£çµ"],
      é¤Šç”Ÿ: ["éœåèˆ‡é–±è®€","æ·±åº¦æ€è€ƒèˆ‡åæ€","ç¨ç«‹é‹å‹•å¦‚æ¸¸æ³³","æ³¨é‡ç²¾ç¥é¤Šç”Ÿ"]
    }
  };
  
  const pickAdvice = (category) => {
    const mainAdvice = adviceBank[mainBeast][category];
    const secondaryAdvice = secondaryBeast ? adviceBank[secondaryBeast][category] : [];
    let advice = [];
    
    // ä¸»å‹å»ºè­°
    if (mainAdvice) {
      advice.push(mainAdvice[0] + "ã€‚");
    }
    
    // æ¬¡å‹å»ºè­°
    if (secondaryBeast && secondaryAdvice) {
      advice.push(secondaryAdvice[1] + "ã€‚");
    }
    
    return advice.length > 0 ? advice : ["æš«ç„¡ç‰¹å®šå»ºè­°"];
  };
  
  return {
    è·å ´: pickAdvice("è·å ´"),
    æ„Ÿæƒ…: pickAdvice("æ„Ÿæƒ…"),
    é¤Šç”Ÿ: pickAdvice("é¤Šç”Ÿ")
  };
}

// ========== è¶…äººé¡¯ç¤º ==========
function showSuperhero(beastType) {
  const gender = document.querySelector('input[name="gender"]:checked').value;
  const beastData = superheroData[beastType];
  
  if (beastData) {
    const genderData = beastData[gender] || beastData.male;
    
    document.getElementById("superhero-name").textContent = genderData.name;
    document.getElementById("superhero-ability").textContent = genderData.ability;
    document.getElementById("superhero-mission").textContent = genderData.mission;
    document.getElementById("superhero-local").textContent = `ğŸ® å°ç£åœ¨åœ°ç‰ˆï¼š${genderData.localName} - ${genderData.description}`;
    
    // ç›´æ¥ä½¿ç”¨ superheroData ä¸­çš„åœ–ç‰‡è·¯å¾‘
    document.getElementById("superhero-image").src = genderData.image;
    
    document.getElementById("superheroReport").style.display = "block";
  }
}

// ========== AIåˆ†æ - æ™ºèƒ½ç”Ÿæˆæ“´å……å…§å®¹ ==========
function fillAIAnalysis(beastType) {
  // æ ¹æ“šç”¨æˆ¶çš„å…·é«”åˆ†æ•¸å’Œç‰¹è³ªç”Ÿæˆå€‹æ€§åŒ–åˆ†æ
  const saved = JSON.parse(localStorage.getItem("shen-shou-result") || "null");
  const scores = saved?.scores || {};
  const gender = saved?.gender || 'male';
  
  // è¨ˆç®—èƒ½é‡åˆ†å¸ƒç‰¹å¾µ
  const energyDistribution = calculateEnergyDistribution(scores);
  const dominantTraits = identifyDominantTraits(scores, beastType);
  const growthAreas = identifyGrowthAreas(scores);
  
  const analysisData = generatePersonalizedAnalysis(beastType, scores, energyDistribution, dominantTraits, growthAreas, gender);
  
  document.getElementById("ai-personality").innerHTML = formatAnalysisContent(analysisData.personality);
  document.getElementById("ai-strengths").innerHTML = formatAnalysisContent(analysisData.strengths);
  document.getElementById("ai-career").innerHTML = formatAnalysisContent(analysisData.career);
  document.getElementById("ai-relationships").innerHTML = formatAnalysisContent(analysisData.relationships);
  document.getElementById("ai-growth").innerHTML = formatAnalysisContent(analysisData.growth);
  document.getElementById("ai-money").innerHTML = formatAnalysisContent(analysisData.money);
}

// è¨ˆç®—èƒ½é‡åˆ†å¸ƒ
function calculateEnergyDistribution(scores) {
  const total = Object.values(scores).reduce((sum, score) => sum + score, 0);
  const distribution = {};
  
  for (const [beast, score] of Object.entries(scores)) {
    distribution[beast] = {
      percentage: ((score / total) * 100).toFixed(1),
      level: getEnergyLevel(score)
    };
  }
  
  return distribution;
}

function getEnergyLevel(score) {
  if (score >= 23) return 'æ¥µå¼·';
  if (score >= 20) return 'å¼·';
  if (score >= 17) return 'ä¸­ç­‰';
  if (score >= 14) return 'åå¼±';
  return 'å¼±';
}

// è­˜åˆ¥ä¸»å°ç‰¹è³ª
function identifyDominantTraits(scores, mainBeast) {
  const traits = [];
  const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
  
  // ä¸»å‹ç‰¹è³ª
  traits.push({
    beast: mainBeast,
    score: scores[mainBeast],
    description: getBeastTraits(mainBeast)
  });
  
  // æ¬¡å‹ç‰¹è³ªï¼ˆå¦‚æœåˆ†æ•¸æ¥è¿‘ï¼‰
  if (sorted[1] && sorted[1][1] >= scores[mainBeast] - 3) {
    traits.push({
      beast: sorted[1][0],
      score: sorted[1][1],
      description: getBeastTraits(sorted[1][0])
    });
  }
  
  return traits;
}

// è­˜åˆ¥æˆé•·é ˜åŸŸ
function identifyGrowthAreas(scores) {
  const areas = [];
  const minScore = Math.min(...Object.values(scores));
  const weakBeasts = Object.entries(scores).filter(([_, score]) => score === minScore);
  
  weakBeasts.forEach(([beast, score]) => {
    areas.push({
      beast: beast,
      score: score,
      improvement: getGrowthSuggestions(beast)
    });
  });
  
  return areas;
}

// ç”Ÿæˆå€‹æ€§åŒ–åˆ†æ
function generatePersonalizedAnalysis(beastType, scores, energyDistribution, dominantTraits, growthAreas, gender) {
  const mainScore = scores[beastType];
  const energyLevel = getEnergyLevel(mainScore);
  const hasStrongSecondary = dominantTraits.length > 1;
  
  return {
    personality: generatePersonalityAnalysis(beastType, scores, energyDistribution, dominantTraits, gender),
    strengths: generateStrengthsAnalysis(beastType, scores, dominantTraits, energyLevel),
    career: generateCareerAnalysis(beastType, scores, energyDistribution, hasStrongSecondary),
    relationships: generateRelationshipsAnalysis(beastType, scores, dominantTraits, gender),
    growth: generateGrowthAnalysis(beastType, growthAreas, energyDistribution),
    money: generateMoneyAnalysis(beastType, scores, energyDistribution)
  };
}

// è©³ç´°åˆ†æç”Ÿæˆå‡½æ•¸
function generatePersonalityAnalysis(beastType, scores, distribution, traits, gender) {
  const mainPercent = distribution[beastType].percentage;
  const genderText = gender === 'male' ? 'ç”·æ€§' : gender === 'female' ? 'å¥³æ€§' : '';
  
  let analysis = `<div class="space-y-3">`;
  
  // æ ¸å¿ƒäººæ ¼æè¿°
  analysis += `<p><strong>æ ¸å¿ƒäººæ ¼ç‰¹è³ªï¼š</strong>æ‚¨çš„${beastType}èƒ½é‡ä½”æ¯”${mainPercent}%ï¼Œå±¬æ–¼${distribution[beastType].level}ç¨‹åº¦ã€‚${genderText}${beastType}å‹äººæ ¼é€šå¸¸${getCorePersonality(beastType, gender)}</p>`;
  
  // èƒ½é‡çµ„åˆåˆ†æ
  if (traits.length > 1) {
    analysis += `<p><strong>èƒ½é‡çµ„åˆï¼š</strong>æ‚¨å±•ç¾å‡º${beastType}èˆ‡${traits[1].beast}çš„ç¨ç‰¹çµ„åˆã€‚é€™ç¨®çµ„åˆè®“æ‚¨${getCombinationTraits(beastType, traits[1].beast)}</p>`;
  }
  
  // å…·é«”è¡Œç‚ºæ¨¡å¼
  analysis += `<p><strong>è¡Œç‚ºæ¨¡å¼ï¼š</strong>${getBehaviorPatterns(beastType, scores)}</p>`;
  
  // æ·±å±¤å‹•æ©Ÿ
  analysis += `<p><strong>æ·±å±¤å‹•æ©Ÿï¼š</strong>${getDeepMotivations(beastType)}</p>`;
  
  analysis += `</div>`;
  return analysis;
}

function generateStrengthsAnalysis(beastType, scores, traits, energyLevel) {
  let analysis = `<div class="space-y-3">`;
  
  analysis += `<p><strong>å¤©è³¦å„ªå‹¢ï¼š</strong>æ‚¨çš„${beastType}èƒ½é‡é”åˆ°${energyLevel}ç­‰ç´šï¼Œåœ¨${getKeyStrengths(beastType)}æ–¹é¢å…·æœ‰å¤©ç„¶å„ªå‹¢ã€‚</p>`;
  
  // å…·é«”å„ªå‹¢åˆ—èˆ‰
  const strengths = getSpecificStrengths(beastType);
  analysis += `<ul class="list-disc pl-5 space-y-1">`;
  strengths.forEach(strength => {
    analysis += `<li>${strength}</li>`;
  });
  analysis += `</ul>`;
  
  // çµ„åˆå„ªå‹¢
  if (traits.length > 1) {
    analysis += `<p><strong>çµ„åˆå„ªå‹¢ï¼š</strong>${getCombinationStrengths(beastType, traits[1].beast)}</p>`;
  }
  
  analysis += `</div>`;
  return analysis;
}

function generateCareerAnalysis(beastType, scores, distribution, hasStrongSecondary) {
  const suitableFields = getSuitableCareerFields(beastType);
  const avoidFields = getAvoidCareerFields(beastType);
  
  let analysis = `<div class="space-y-3">`;
  
  analysis += `<p><strong>æœ€é©è·æ¥­é ˜åŸŸï¼š</strong></p>`;
  analysis += `<ul class="list-disc pl-5 space-y-1">`;
  suitableFields.forEach(field => {
    analysis += `<li>${field}</li>`;
  });
  analysis += `</ul>`;
  
  analysis += `<p><strong>è·å ´å„ªå‹¢ï¼š</strong>${getWorkplaceAdvantages(beastType)}</p>`;
  analysis += `<p><strong>ç™¼å±•å»ºè­°ï¼š</strong>${getCareerDevelopmentTips(beastType)}</p>`;
  
  if (hasStrongSecondary) {
    analysis += `<p><strong>è·¨é ˜åŸŸæ½›åŠ›ï¼š</strong>${getCrossFieldPotential(beastType)}</p>`;
  }
  
  analysis += `</div>`;
  return analysis;
}

function generateRelationshipsAnalysis(beastType, scores, traits, gender) {
  let analysis = `<div class="space-y-3">`;
  
  analysis += `<p><strong>æƒ…æ„Ÿæ¨¡å¼ï¼š</strong>${getRelationshipPatterns(beastType, gender)}</p>`;
  analysis += `<p><strong>æºé€šé¢¨æ ¼ï¼š</strong>${getCommunicationStyle(beastType)}</p>`;
  analysis += `<p><strong>è¦ªå¯†é—œä¿‚å»ºè­°ï¼š</strong>${getIntimacyAdvice(beastType, gender)}</p>`;
  
  // é©åˆçš„ä¼´ä¾¶é¡å‹
  const compatibleTypes = getCompatibleTypes(beastType);
  analysis += `<p><strong>æƒ…æ„Ÿç›¸å®¹é¡å‹ï¼š</strong>${compatibleTypes.join('ã€')}</p>`;
  
  analysis += `</div>`;
  return analysis;
}

function generateGrowthAnalysis(beastType, growthAreas, distribution) {
  let analysis = `<div class="space-y-3">`;
  
  analysis += `<p><strong>ä¸»è¦æˆé•·èª²é¡Œï¼š</strong>${getMainGrowthChallenges(beastType)}</p>`;
  
  // å…·é«”æ”¹é€²å»ºè­°
  analysis += `<p><strong>å…·é«”æ”¹é€²æ–¹å‘ï¼š</strong></p>`;
  analysis += `<ul class="list-disc pl-5 space-y-1">`;
  getGrowthActions(beastType).forEach(action => {
    analysis += `<li>${action}</li>`;
  });
  analysis += `</ul>`;
  
  // å¼±å‹¢èƒ½é‡ç™¼å±•
  if (growthAreas.length > 0) {
    analysis += `<p><strong>å¼±å‹¢èƒ½é‡ç™¼å±•ï¼š</strong>${getWeaknessDevelopment(growthAreas[0].beast)}</p>`;
  }
  
  analysis += `</div>`;
  return analysis;
}

function generateMoneyAnalysis(beastType, scores, distribution) {
  let analysis = `<div class="space-y-3">`;
  
  analysis += `<p><strong>è²¡å¯Œèƒ½é‡ï¼š</strong>${getWealthEnergy(beastType)}</p>`;
  analysis += `<p><strong>é©åˆçš„ç†è²¡æ–¹å¼ï¼š</strong>${getSuitableInvestments(beastType)}</p>`;
  analysis += `<p><strong>é‡‘éŒ¢å¦è±¡è§£è®€ï¼š</strong>${getMoneyHexagram(beastType)}</p>`;
  analysis += `<p><strong>è²¡å¯Œç™¼å±•å»ºè­°ï¼š</strong>${getWealthDevelopmentTips(beastType)}</p>`;
  
  analysis += `</div>`;
  return analysis;
}

// æ ¼å¼åŒ–åˆ†æå…§å®¹
function formatAnalysisContent(content) {
  return content;
}

// å…·é«”çš„å…§å®¹ç”Ÿæˆå‡½æ•¸
function getCorePersonality(beastType, gender) {
  const personalities = {
    'é’é¾': 'å…·æœ‰é–‹å‰µæ€§æ€ç¶­ï¼Œå–œæ­¡æ¢ç´¢æœªçŸ¥ï¼Œå……æ»¿å¥½å¥‡å¿ƒå’Œå‰µæ–°ç²¾ç¥ã€‚åœ¨åœ˜éšŠä¸­å¾€å¾€æ˜¯å‰µæ„çš„ä¾†æºï¼Œèƒ½å¤ çœ‹åˆ°åˆ¥äººçœ‹ä¸åˆ°çš„å¯èƒ½æ€§ã€‚',
    'æœ±é›€': 'ç†±æƒ…æ´‹æº¢ï¼Œå–„æ–¼è¡¨é”ï¼Œå…·æœ‰å¼·çƒˆçš„æ„ŸæŸ“åŠ›å’Œç¤¾äº¤èƒ½åŠ›ã€‚å¤©ç”Ÿå°±æ˜¯äººç¾¤ä¸­çš„ç„¦é»ï¼Œèƒ½å¤ æœ‰æ•ˆæ¿€ç™¼åœ˜éšŠç†±æƒ…ã€‚',
    'å‹¾é™³': 'ç©©é‡å¯é ï¼Œæ³¨é‡ç§©åºï¼Œå…·æœ‰å„ªç§€çš„çµ„ç¹”èƒ½åŠ›å’Œè²¬ä»»æ„Ÿã€‚æ˜¯åœ˜éšŠä¸­æœ€å€¼å¾—ä¿¡è³´çš„æ”¯æŸ±ï¼Œç¢ºä¿ä¸€åˆ‡äº•ç„¶æœ‰åºã€‚',
    'è£è›‡': 'ç›´è¦ºæ•éŠ³ï¼Œå–„æ–¼è§€å¯Ÿï¼Œå…·æœ‰å„ªç§€çš„æ´å¯ŸåŠ›å’Œå”èª¿èƒ½åŠ›ã€‚èƒ½å¤ æ„ŸçŸ¥ä»–äººæœªèªªå‡ºå£çš„éœ€æ±‚å’Œæƒ…ç·’è®ŠåŒ–ã€‚',
    'ç™½è™': 'è¡Œå‹•åŠ›å¼·ï¼Œç›®æ¨™æ˜ç¢ºï¼Œå…·æœ‰æ±ºæ–·åŠ›å’ŒåŸ·è¡ŒåŠ›ã€‚é¢å°æŒ‘æˆ°æ™‚èƒ½å¤ å¿«é€Ÿåšå‡ºæ±ºç­–ä¸¦ä»˜è«¸è¡Œå‹•ã€‚',
    'ç„æ­¦': 'æ·±æ€ç†Ÿæ…®ï¼Œç†æ€§å†·éœï¼Œå…·æœ‰å„ªç§€çš„åˆ†æèƒ½åŠ›å’Œæˆ°ç•¥æ€ç¶­ã€‚å–„æ–¼å¾è¤‡é›œä¿¡æ¯ä¸­æç…‰é—œéµæ´å¯Ÿã€‚'
  };
  return personalities[beastType] || 'å…·æœ‰ç¨ç‰¹çš„äººæ ¼ç‰¹è³ªã€‚';
}

function getKeyStrengths(beastType) {
  const strengths = {
    'é’é¾': 'å‰µæ„ç™¼æƒ³ã€å•é¡Œè§£æ±ºã€é©æ‡‰è®ŠåŒ–',
    'æœ±é›€': 'äººéš›æºé€šã€åœ˜éšŠæ¿€å‹µã€å…¬é–‹è¡¨é”',
    'å‹¾é™³': 'ç³»çµ±è¦åŠƒã€ç´°ç¯€ç®¡ç†ã€ç©©å®šé‹ä½œ',
    'è£è›‡': 'äººéš›æ´å¯Ÿã€å±æ©Ÿè™•ç†ã€æ™‚æ©ŸæŠŠæ¡',
    'ç™½è™': 'å¿«é€Ÿæ±ºç­–ã€ç›®æ¨™é”æˆã€å£“åŠ›ç®¡ç†',
    'ç„æ­¦': 'æ·±åº¦æ€è€ƒã€ç­–ç•¥è¦åŠƒã€é¢¨éšªæ§åˆ¶'
  };
  return strengths[beastType] || 'å¤šå€‹é ˜åŸŸ';
}

function getSpecificStrengths(beastType) {
  const strengthMap = {
    'é’é¾': [
      'èƒ½å¤ åœ¨è¤‡é›œæƒ…å¢ƒä¸­çœ‹åˆ°æ–°çš„å¯èƒ½æ€§',
      'å–„æ–¼å°‡æŠ½è±¡æ¦‚å¿µè½‰åŒ–ç‚ºå…·é«”æ–¹æ¡ˆ',
      'é¢å°è®ŠåŒ–æ™‚èƒ½å¤ å¿«é€Ÿèª¿æ•´ç­–ç•¥',
      'å…·æœ‰è·¨ç•Œæ€è€ƒçš„ç¨ç‰¹èƒ½åŠ›',
      'èƒ½å¤ æ¿€ç™¼åœ˜éšŠçš„å‰µé€ æ€§æ€ç¶­'
    ],
    'æœ±é›€': [
      'èƒ½å¤ æœ‰æ•ˆæ¿€ç™¼åœ˜éšŠçš„ç†±æƒ…èˆ‡å‹•åŠ›',
      'åœ¨å…¬é–‹å ´åˆè¡¨é”æ¸…æ™°ä¸”æœ‰èªªæœåŠ›',
      'å–„æ–¼å»ºç«‹å»£æ³›çš„äººéš›ç¶²çµ¡',
      'èƒ½å¤ æ•éŠ³æ„ŸçŸ¥ä»–äººæƒ…ç·’è®ŠåŒ–',
      'å…·æœ‰å„ªç§€çš„è¡çªèª¿è§£èƒ½åŠ›'
    ],
    'å‹¾é™³': [
      'èƒ½å¤ å»ºç«‹ç©©å®šå¯é çš„å·¥ä½œç³»çµ±',
      'æ³¨é‡ç´°ç¯€ç¢ºä¿ä»»å‹™å®Œç¾åŸ·è¡Œ',
      'åœ¨å£“åŠ›ä¸‹ä»èƒ½ä¿æŒå†·éœå°ˆæ¥­',
      'å…·æœ‰å„ªç§€çš„æ™‚é–“ç®¡ç†èƒ½åŠ›',
      'èƒ½å¤ æœ‰æ•ˆå”èª¿è³‡æºåˆ†é…'
    ],
    'è£è›‡': [
      'èƒ½å¤ æº–ç¢ºè®€æ‡‚ä»–äººçš„çœŸå¯¦æ„åœ–',
      'å–„æ–¼åœ¨è¤‡é›œäººéš›é—œä¿‚ä¸­æ‰¾åˆ°å¹³è¡¡',
      'å…·æœ‰å„ªç§€çš„å±æ©Ÿé è­¦èƒ½åŠ›',
      'èƒ½å¤ æŠŠæ¡æœ€ä½³è¡Œå‹•æ™‚æ©Ÿ',
      'å…·æœ‰æ·±åº¦å‚¾è½å’Œç†è§£èƒ½åŠ›'
    ],
    'ç™½è™': [
      'èƒ½å¤ åœ¨ç·Šæ€¥æƒ…æ³ä¸‹å¿«é€Ÿæ±ºç­–',
      'å…·æœ‰å¼·å¤§çš„ç›®æ¨™é”æˆèƒ½åŠ›',
      'é¢å°å£“åŠ›æ™‚è¡¨ç¾å‡ºå“è¶ŠéŸŒæ€§',
      'èƒ½å¤ æœ‰æ•ˆé ˜å°åœ˜éšŠè¡åˆºç›®æ¨™',
      'å…·æœ‰å„ªç§€çš„å•é¡Œè§£æ±ºæ•ˆç‡'
    ],
    'ç„æ­¦': [
      'èƒ½å¤ é€²è¡Œæ·±åº¦ç³»çµ±æ€§æ€è€ƒ',
      'å–„æ–¼å¾æ•¸æ“šä¸­ç™¼ç¾é—œéµæ¨¡å¼',
      'å…·æœ‰å„ªç§€çš„é•·æœŸè¦åŠƒèƒ½åŠ›',
      'èƒ½å¤ å†·éœåˆ†æè¤‡é›œæƒ…å¢ƒ',
      'å…·æœ‰å“è¶Šçš„é¢¨éšªè©•ä¼°èƒ½åŠ›'
    ]
  };
  return strengthMap[beastType] || ['å…·æœ‰å¤šæ–¹é¢çš„èƒ½åŠ›å„ªå‹¢'];
}

function getSuitableCareerFields(beastType) {
  const fields = {
    'é’é¾': [
      'å‰µæ–°å‰µæ¥­é ˜åŸŸ',
      'ç”¢å“è¨­è¨ˆèˆ‡é–‹ç™¼',
      'å¸‚å ´ç­–ç•¥è¦åŠƒ',
      'å‰µæ„å…§å®¹è£½ä½œ',
      'æ–°èˆˆç§‘æŠ€æ‡‰ç”¨',
      'é¡§å•è«®è©¢æœå‹™'
    ],
    'æœ±é›€': [
      'å…¬é—œèˆ‡åª’é«”å‚³æ’­',
      'æ•™è‚²åŸ¹è¨“è¡Œæ¥­',
      'éŠ·å”®èˆ‡å®¢æˆ¶é—œä¿‚',
      'æ´»å‹•ç­–åŠƒåŸ·è¡Œ',
      'äººåŠ›è³‡æºç®¡ç†',
      'å¿ƒç†è«®è©¢è¼”å°'
    ],
    'å‹¾é™³': [
      'é …ç›®ç®¡ç†è·ä½',
      'è³ªé‡æ§åˆ¶éƒ¨é–€',
      'è¡Œæ”¿ç®¡ç†å·¥ä½œ',
      'è²¡å‹™æœƒè¨ˆé ˜åŸŸ',
      'ç³»çµ±ç¶­è­·é‹ç‡Ÿ',
      'å¾Œå‹¤æ”¯æ´æœå‹™'
    ],
    'è£è›‡': [
      'å¿ƒç†è«®è©¢è¼”å°',
      'äººåŠ›è³‡æºå”èª¿',
      'å•†æ¥­è«‡åˆ¤ä»£è¡¨',
      'å±æ©Ÿè™•ç†å°ˆå®¶',
      'åœ˜éšŠå»ºè¨­æŒ‡å°',
      'å®¢æˆ¶é—œä¿‚ç®¡ç†'
    ],
    'ç™½è™': [
      'ç·Šæ€¥æ•‘æ´æœå‹™',
      'éŠ·å”®åœ˜éšŠé ˜å°',
      'é …ç›®åŸ·è¡Œç®¡ç†',
      'ç«¶æŠ€é«”è‚²é ˜åŸŸ',
      'è»äº‹è­¦å¯Ÿè·æ¥­',
      'ç”Ÿç”¢è£½é€ ç®¡ç†'
    ],
    'ç„æ­¦': [
      'ç ”ç©¶åˆ†æå·¥ä½œ',
      'æŠ€è¡“ç ”ç™¼é ˜åŸŸ',
      'æˆ°ç•¥è¦åŠƒéƒ¨é–€',
      'é¢¨éšªç®¡ç†è·ä½',
      'å­¸è¡“ç ”ç©¶æ©Ÿæ§‹',
      'æ•¸æ“šåˆ†æå°ˆæ¥­'
    ]
  };
  return fields[beastType] || ['å¤šå€‹è·æ¥­é ˜åŸŸ'];
}

function getRelationshipPatterns(beastType, gender) {
  const patterns = {
    'é’é¾': 'åœ¨é—œä¿‚ä¸­è¿½æ±‚æ–°é®®æ„Ÿå’Œæˆé•·ï¼Œéœ€è¦è¶³å¤ çš„å€‹äººç©ºé–“å’Œæ¢ç´¢è‡ªç”±ã€‚å–œæ­¡èˆ‡ä¼´ä¾¶å…±åŒå­¸ç¿’å’Œé«”é©—æ–°äº‹ç‰©ï¼Œé¿å…ä¸€æˆä¸è®Šçš„ç›¸è™•æ¨¡å¼ã€‚',
    'æœ±é›€': 'ç†±æƒ…è€ŒæŠ•å…¥ï¼Œé‡è¦–æƒ…æ„Ÿè¡¨é”å’Œæ·±åº¦é€£çµï¼Œéœ€è¦è¢«é—œæ³¨å’Œèªå¯ã€‚åœ¨é—œä¿‚ä¸­å–„æ–¼ç‡Ÿé€ æµªæ¼«æ°›åœï¼Œä½†ä¹Ÿéœ€è¦å¾—åˆ°åŒç­‰çš„æƒ…æ„Ÿå›é¥‹ã€‚',
    'å‹¾é™³': 'ç©©å®šè€Œå¿ èª ï¼Œæ³¨é‡å¯¦éš›è¡Œå‹•å’Œé•·æœŸæ‰¿è«¾ï¼Œéœ€è¦å®‰å…¨æ„Ÿå’Œæ­¸å±¬æ„Ÿã€‚åœ¨é—œä¿‚ä¸­æä¾›å¯é æ”¯æŒï¼ŒæœŸæœ›å»ºç«‹ç©©å›ºé•·ä¹…çš„ä¼´ä¾¶é—œä¿‚ã€‚',
    'è£è›‡': 'æ•æ„Ÿè€Œé«”è²¼ï¼Œé‡è¦–å¿ƒéˆå¥‘åˆå’Œæ·±åº¦ç†è§£ï¼Œéœ€è¦ä¿¡ä»»å’ŒçœŸèª ã€‚èƒ½å¤ æ•éŠ³æ„ŸçŸ¥ä¼´ä¾¶éœ€æ±‚ï¼Œä½†ä¹Ÿéœ€è¦è¢«æ·±åˆ»ç†è§£å’Œæ¥ç´ã€‚',
    'ç™½è™': 'ç›´æ¥è€Œä¿è­·ï¼Œé‡è¦–è¡Œå‹•è­‰æ˜å’Œå¯¦éš›æ”¯æŒï¼Œéœ€è¦å°Šé‡å’Œç¨ç«‹ã€‚åœ¨é—œä¿‚ä¸­è¡¨ç¾å‡ºå¼·çƒˆçš„ä¿è­·æ¬²ï¼Œä½†ä¹Ÿéœ€è¦å€‹äººç©ºé–“å’Œè‡ªä¸»æ¬Šã€‚',
    'ç„æ­¦': 'æ·±æ²‰è€Œç†æ€§ï¼Œé‡è¦–æ€æƒ³äº¤æµå’Œæ™ºæ…§ç¢°æ’ï¼Œéœ€è¦ç©ºé–“å’Œç†è§£ã€‚åœ¨é—œä¿‚ä¸­è¿½æ±‚æ·±åº¦é€£çµï¼Œä½†ä¹Ÿéœ€è¦ç¨è™•æ™‚é–“é€²è¡Œæ€è€ƒã€‚'
  };
  return patterns[beastType] || 'å…·æœ‰ç¨ç‰¹çš„æƒ…æ„Ÿè¡¨é”æ–¹å¼ã€‚';
}

function getMoneyHexagram(beastType) {
  const hexagrams = {
    'é’é¾': 'ä¹¾ç‚ºå¤©å¦ï¼Œè±¡å¾µå‰µé€ èˆ‡é–‹æ‹“ã€‚è²¡é‹å¦‚é¾é¨°ä¹å¤©ï¼Œå®œæŠŠæ¡å‰µæ–°æ©Ÿæœƒï¼Œä½†éœ€æ³¨æ„é¢¨éšªæ§åˆ¶ã€‚é©åˆæŠ•è³‡æ–°èˆˆç”¢æ¥­å’Œå‰µæ„é …ç›®ã€‚',
    'æœ±é›€': 'é›¢ç‚ºç«å¦ï¼Œè±¡å¾µå…‰æ˜èˆ‡é€£çµã€‚è²¡é‹å¦‚é³³èˆé›²ç«¯ï¼Œå®œç™¼å±•äººè„ˆè³‡æºï¼Œä½†éœ€é¿å…éåº¦æ¶ˆè²»ã€‚é©åˆå¾äº‹èˆ‡äººç›¸é—œçš„è¡Œæ¥­ã€‚',
    'å‹¾é™³': 'å¤ç‚ºåœ°å¦ï¼Œè±¡å¾µç©©å®šèˆ‡ç©ç´¯ã€‚è²¡é‹å¦‚å¤§åœ°æ‰¿è¼‰ï¼Œå®œç©©å¥æŠ•è³‡ï¼Œä½†éœ€é©æ™‚çªç ´èˆ’é©åœˆã€‚é©åˆé•·æœŸç©©å®šçš„ç†è²¡æ–¹å¼ã€‚',
    'è£è›‡': 'å·½ç‚ºé¢¨å¦ï¼Œè±¡å¾µè®Šé€šèˆ‡æ™‚æ©Ÿã€‚è²¡é‹å¦‚é¢¨è¡Œè‰åƒï¼Œå®œæŠŠæ¡æ™‚æ©Ÿé€²é€€ï¼Œä½†éœ€å …å®ˆåŸå‰‡ã€‚é©åˆéˆæ´»å¤šè®Šçš„æŠ•è³‡ç­–ç•¥ã€‚',
    'ç™½è™': 'éœ‡ç‚ºé›·å¦ï¼Œè±¡å¾µè¡Œå‹•èˆ‡çªç ´ã€‚è²¡é‹å¦‚é›·å‹•å››æ–¹ï¼Œå®œç©æ¥µé–‹æ‹“ï¼Œä½†éœ€æ³¨æ„è¡å‹•æ±ºç­–ã€‚é©åˆé«˜é¢¨éšªé«˜å›å ±çš„æŠ•è³‡ã€‚',
    'ç„æ­¦': 'åç‚ºæ°´å¦ï¼Œè±¡å¾µæ™ºæ…§èˆ‡æ·±è¬€ã€‚è²¡é‹å¦‚æ°´åŒ¯æˆæ·µï¼Œå®œé•·æœŸè¦åŠƒï¼Œä½†éœ€é¿å…éåº¦ä¿å®ˆã€‚é©åˆç ”ç©¶å’Œåˆ†æå‹æŠ•è³‡ã€‚'
  };
  return hexagrams[beastType] || 'å…·æœ‰ç¨ç‰¹çš„è²¡å¯Œèƒ½é‡æ¨¡å¼ã€‚';
}

function getMainGrowthChallenges(beastType) {
  const challenges = {
    'é’é¾': 'å­¸ç¿’å°‡å‰µæ„è½åœ°åŸ·è¡Œï¼ŒåŸ¹é¤ŠæŒçºŒæ€§å’Œå°ˆæ³¨åŠ›ï¼Œé¿å…éåº¦åˆ†æ•£æ³¨æ„åŠ›ã€‚éœ€è¦å»ºç«‹ç³»çµ±æ€§çš„å·¥ä½œç¿’æ…£ï¼Œå°‡éˆæ„Ÿè½‰åŒ–ç‚ºå¯¦éš›æˆæœã€‚',
    'æœ±é›€': 'å¹³è¡¡æƒ…æ„Ÿè¡¨é”èˆ‡ç†æ€§æ€è€ƒï¼Œå­¸ç¿’ç¨è™•å’Œè‡ªæˆ‘åæ€ï¼Œé¿å…éåº¦ä¾è³´å¤–éƒ¨èªå¯ã€‚éœ€è¦ç™¼å±•å…§åœ¨å®‰å…¨æ„Ÿï¼Œå»ºç«‹å¥åº·çš„é‚Šç•Œæ„Ÿã€‚',
    'å‹¾é™³': 'çªç ´å‚³çµ±æ€ç¶­æ¡†æ¶ï¼Œå­¸ç¿’æ¥å—è®ŠåŒ–èˆ‡ä¸ç¢ºå®šæ€§ï¼Œé¿å…éåº¦ä¿å®ˆå’ŒåƒµåŒ–ã€‚éœ€è¦åŸ¹é¤Šå‰µæ–°æ€ç¶­ï¼Œé©æ™‚è·³å‡ºèˆ’é©åœˆã€‚',
    'è£è›‡': 'å»ºç«‹æ˜ç¢ºçš„å€‹äººé‚Šç•Œï¼Œå­¸ç¿’ç›´æ¥è¡¨é”éœ€æ±‚ï¼Œé¿å…éåº¦é©æ‡‰ä»–äººæœŸæœ›ã€‚éœ€è¦ç™¼å±•è‡ªæˆ‘è‚¯å®šï¼Œå¹³è¡¡ä»–äººéœ€æ±‚èˆ‡è‡ªæˆ‘éœ€æ±‚ã€‚',
    'ç™½è™': 'åŸ¹é¤Šè€å¿ƒå’Œç´°ç·»ï¼Œå­¸ç¿’åœ˜éšŠåˆä½œèˆ‡æˆæ¬Šï¼Œé¿å…éåº¦æ§åˆ¶å’Œæ€¥èºã€‚éœ€è¦ç™¼å±•åŒç†å¿ƒï¼Œå­¸ç¿’è†è½ä»–äººæ„è¦‹ã€‚',
    'ç„æ­¦': 'åŠ å¼·è¡Œå‹•åŠ›å’Œå¯¦è¸ï¼Œå­¸ç¿’æƒ…æ„Ÿè¡¨é”èˆ‡é€£çµï¼Œé¿å…éåº¦ç†æ€§èˆ‡ç–é›¢ã€‚éœ€è¦åŸ¹é¤Šç›´è¦ºèƒ½åŠ›ï¼Œå¹³è¡¡æ€è€ƒèˆ‡è¡Œå‹•ã€‚'
  };
  return challenges[beastType] || 'æŒçºŒçš„è‡ªæˆ‘æå‡å’Œæˆé•·ã€‚';
}

// å…¶ä»–è¼”åŠ©å‡½æ•¸
function getBeastTraits(beastType) {
  // è¿”å›ç¥ç¸ç‰¹è³ªæè¿°
  return '';
}

function getGrowthSuggestions(beastType) {
  // è¿”å›æˆé•·å»ºè­°
  return '';
}

function getCombinationTraits(beast1, beast2) {
  // è¿”å›çµ„åˆç‰¹è³ª
  return `çµåˆäº†${beast1}çš„å‰µé€ åŠ›å’Œ${beast2}çš„ç©©å®šæ€§ï¼Œå½¢æˆç¨ç‰¹çš„å„ªå‹¢çµ„åˆã€‚`;
}

function getBehaviorPatterns(beastType, scores) {
  // è¿”å›å…·é«”è¡Œç‚ºæ¨¡å¼
  return `åœ¨å£“åŠ›æƒ…å¢ƒä¸‹å‚¾å‘æ–¼${getPressureResponse(beastType)}ï¼Œåœ¨ç¤¾äº¤å ´åˆä¸­è¡¨ç¾å‡º${getSocialBehavior(beastType)}çš„ç‰¹è³ªã€‚`;
}

function getDeepMotivations(beastType) {
  const motivations = {
    'é’é¾': 'è¿½æ±‚è‡ªç”±æ¢ç´¢å’Œå‰µé€ æ€§è¡¨é”ï¼Œæ¸´æœ›çªç ´é™åˆ¶å¯¦ç¾å€‹äººæ½›èƒ½ã€‚',
    'æœ±é›€': 'å°‹æ±‚æƒ…æ„Ÿé€£çµå’Œç¤¾æœƒèªåŒï¼Œæ¸´æœ›è¢«çœ‹è¦‹ã€è¢«ç†è§£å’Œè¢«çæƒœã€‚',
    'å‹¾é™³': 'è¿½æ±‚å®‰å…¨ç©©å®šå’Œç§©åºå’Œè«§ï¼Œæ¸´æœ›å»ºç«‹å¯é çš„ç”Ÿæ´»åŸºç¤ã€‚',
    'è£è›‡': 'å°‹æ±‚æ·±åº¦ç†è§£å’Œå¿ƒéˆå¥‘åˆï¼Œæ¸´æœ›çœŸå¯¦çš„å…§åœ¨é€£çµã€‚',
    'ç™½è™': 'è¿½æ±‚æˆå°±ç›®æ¨™å’Œå½±éŸ¿åŠ›ï¼Œæ¸´æœ›è­‰æ˜è‡ªå·±çš„èƒ½åŠ›å’Œåƒ¹å€¼ã€‚',
    'ç„æ­¦': 'å°‹æ±‚æ™ºæ…§çœŸç†å’Œå…§åœ¨å¹³éœï¼Œæ¸´æœ›ç†è§£ç”Ÿå‘½æ·±å±¤æ„ç¾©ã€‚'
  };
  return motivations[beastType] || 'å…·æœ‰ç¨ç‰¹çš„å…§åœ¨é©…å‹•åŠ›ã€‚';
}

function getPressureResponse(beastType) {
  const responses = {
    'é’é¾': 'å°‹æ±‚æ–°çš„è§£æ±ºæ–¹æ¡ˆ',
    'æœ±é›€': 'å°‹æ±‚æƒ…æ„Ÿæ”¯æŒ',
    'å‹¾é™³': 'å»ºç«‹æ›´å¤šçµæ§‹',
    'è£è›‡': 'è§€å¯Ÿå’Œåˆ†ææƒ…æ³',
    'ç™½è™': 'æ¡å–ç›´æ¥è¡Œå‹•',
    'ç„æ­¦': 'é€€å¾Œæ€è€ƒåˆ†æ'
  };
  return responses[beastType] || 'ç‰¹å®šçš„æ‡‰å°æ–¹å¼';
}

function getSocialBehavior(beastType) {
  const behaviors = {
    'é’é¾': 'æ´»èºå‰µæ–°',
    'æœ±é›€': 'ç†±æƒ…å¤–å‘',
    'å‹¾é™³': 'ç©©é‡å¯é ',
    'è£è›‡': 'è§€å¯Ÿå‚¾è½',
    'ç™½è™': 'ç›´æ¥æœæ–·',
    'ç„æ­¦': 'å†·éœå…§å‘'
  };
  return behaviors[beastType] || 'ç¨ç‰¹çš„ç¤¾äº¤é¢¨æ ¼';
}

// å¯¦ç¾å…¶ä»–å¿…è¦çš„å…§å®¹ç”Ÿæˆå‡½æ•¸...
function getCombinationStrengths(beast1, beast2) {
  return `é€™ç¨®ç¨ç‰¹çµ„åˆè®“æ‚¨åœ¨${beast1}çš„å‰µæ–°æ€ç¶­å’Œ${beast2}çš„å‹™å¯¦åŸ·è¡Œä¹‹é–“æ‰¾åˆ°å®Œç¾å¹³è¡¡ï¼Œèƒ½å¤ æ—¢çœ‹åˆ°é æ™¯åˆæ³¨é‡ç´°ç¯€ã€‚`;
}

function getWorkplaceAdvantages(beastType) {
  const advantages = {
    'é’é¾': 'åœ¨å¿«é€Ÿè®ŠåŒ–çš„ç’°å¢ƒä¸­è¡¨ç¾å‡ºè‰²ï¼Œèƒ½å¤ ç‚ºåœ˜éšŠå¸¶ä¾†å‰µæ–°æ€ç¶­å’Œçªç ´æ€§è§£æ±ºæ–¹æ¡ˆã€‚',
    'æœ±é›€': 'å„ªç§€çš„åœ˜éšŠå»ºè¨­è€…å’Œæ¿€å‹µè€…ï¼Œèƒ½å¤ å‰µé€ ç©æ¥µçš„å·¥ä½œæ°›åœä¸¦æœ‰æ•ˆç®¡ç†å®¢æˆ¶é—œä¿‚ã€‚',
    'å‹¾é™³': 'å¯é çš„é …ç›®ç®¡ç†å°ˆå®¶ï¼Œèƒ½å¤ ç¢ºä¿å·¥ä½œæµç¨‹çš„é †æš¢é‹è¡Œå’Œå“è³ªæ¨™æº–çš„åš´æ ¼æŠŠé—œã€‚',
    'è£è›‡': 'å‡ºè‰²çš„äººéš›é—œä¿‚å°ˆå®¶ï¼Œèƒ½å¤ æœ‰æ•ˆåŒ–è§£è¡çªã€ä¿ƒé€²åœ˜éšŠåˆä½œä¸¦æŠŠæ¡æœ€ä½³æ™‚æ©Ÿã€‚',
    'ç™½è™': 'é«˜æ•ˆçš„åŸ·è¡Œé ˜å°è€…ï¼Œèƒ½å¤ åœ¨å£“åŠ›ä¸‹å¿«é€Ÿæ±ºç­–ä¸¦å¸¶é ˜åœ˜éšŠé”æˆæŒ‘æˆ°æ€§ç›®æ¨™ã€‚',
    'ç„æ­¦': 'æ·±åº¦çš„æˆ°ç•¥æ€è€ƒè€…ï¼Œèƒ½å¤ é€²è¡Œè¤‡é›œåˆ†æã€åˆ¶å®šé•·é è¦åŠƒä¸¦æœ‰æ•ˆç®¡ç†é¢¨éšªã€‚'
  };
  return advantages[beastType] || 'åœ¨å¤šå€‹å·¥ä½œå ´æ™¯ä¸­å…·æœ‰ç¨ç‰¹å„ªå‹¢ã€‚';
}

function getCareerDevelopmentTips(beastType) {
  const tips = {
    'é’é¾': 'å»ºè­°é¸æ“‡å…è¨±å‰µæ„ç™¼æ®çš„å·¥ä½œç’°å¢ƒï¼ŒåŒæ™‚å­¸ç¿’é …ç›®ç®¡ç†æŠ€èƒ½ä¾†ç¢ºä¿å‰µæ„è½åœ°ã€‚',
    'æœ±é›€': 'å»ºè­°ç™¼å±•å…¬é—œæˆ–åŸ¹è¨“ç›¸é—œæŠ€èƒ½ï¼ŒåŒæ™‚å­¸ç¿’æƒ…ç·’ç®¡ç†ä¾†ä¿æŒå·¥ä½œç”Ÿæ´»å¹³è¡¡ã€‚',
    'å‹¾é™³': 'å»ºè­°æ·±è€•å°ˆæ¥­é ˜åŸŸæˆç‚ºå°ˆå®¶ï¼ŒåŒæ™‚é©æ™‚æ¥å—æ–°æŒ‘æˆ°ä»¥é¿å…éåº¦ä¿å®ˆã€‚',
    'è£è›‡': 'å»ºè­°ç™¼å±•è«®è©¢æˆ–å”èª¿ç›¸é—œè·æ¥­ï¼ŒåŒæ™‚å­¸ç¿’è¨­å®šæ˜ç¢ºçš„å€‹äººé‚Šç•Œã€‚',
    'ç™½è™': 'å»ºè­°è¿½æ±‚é ˜å°ç®¡ç†è·ä½ï¼ŒåŒæ™‚åŸ¹é¤Šåœ˜éšŠåˆä½œå’Œè€å¿ƒç­‰å¾…çš„è—è¡“ã€‚',
    'ç„æ­¦': 'å»ºè­°å¾äº‹ç ”ç©¶æˆ–åˆ†æå·¥ä½œï¼ŒåŒæ™‚å­¸ç¿’å°‡æ·±åº¦æ€è€ƒè½‰åŒ–ç‚ºå¯¦éš›è¡Œå‹•ã€‚'
  };
  return tips[beastType] || 'æŒçºŒå­¸ç¿’å’Œå°ˆæ¥­ç™¼å±•æ˜¯é—œéµã€‚';
}

function getCommunicationStyle(beastType) {
  const styles = {
    'é’é¾': 'å¯Œæœ‰æƒ³åƒåŠ›å’Œå•Ÿç™¼æ€§ï¼Œå–œæ­¡ç”¨æ¯”å–»å’Œæ•…äº‹ä¾†è¡¨é”æƒ³æ³•ã€‚',
    'æœ±é›€': 'ç†±æƒ…æ´‹æº¢ä¸”å¯Œæœ‰æ„ŸæŸ“åŠ›ï¼Œå–„æ–¼ç”¨æƒ…æ„Ÿèªè¨€å»ºç«‹é€£çµã€‚',
    'å‹¾é™³': 'æ¸…æ™°å…·é«”ä¸”å¯¦äº‹æ±‚æ˜¯ï¼Œæ³¨é‡é‚è¼¯æ€§å’Œå¯¦éš›æ•ˆæœã€‚',
    'è£è›‡': 'ç´°è†©é«”è²¼ä¸”å¯Œæœ‰åŒç†å¿ƒï¼Œèƒ½å¤ æ„ŸçŸ¥è¨€å¤–ä¹‹æ„ã€‚',
    'ç™½è™': 'ç›´æ¥äº†ç•¶ä¸”ç›®æ¨™æ˜ç¢ºï¼Œæ³¨é‡æ•ˆç‡å’Œçµæœå°å‘ã€‚',
    'ç„æ­¦': 'æ·±æ€ç†Ÿæ…®ä¸”å¯Œæœ‰æ™ºæ…§ï¼Œæ³¨é‡æ·±åº¦å’Œé‚è¼¯åš´è¬¹æ€§ã€‚'
  };
  return styles[beastType] || 'å…·æœ‰ç¨ç‰¹çš„æºé€šç‰¹é»ã€‚';
}

function getIntimacyAdvice(beastType, gender) {
  const advice = {
    'é’é¾': 'åœ¨è¦ªå¯†é—œä¿‚ä¸­éœ€è¦ä¿æŒä¸€å®šçš„æ–°é®®æ„Ÿå’Œæ¢ç´¢ç©ºé–“ï¼Œèˆ‡ä¼´ä¾¶å…±åŒåˆ¶å®šå†’éšªè¨ˆåŠƒå¯ä»¥å¢é€²æ„Ÿæƒ…ã€‚',
    'æœ±é›€': 'éœ€è¦å®šæœŸçš„æƒ…æ„Ÿäº¤æµå’Œæ·±åº¦é€£çµï¼Œå­¸ç¿’è¡¨é”çœŸå¯¦éœ€æ±‚çš„åŒæ™‚ä¹Ÿçµ¦äºˆä¼´ä¾¶è¶³å¤ çš„é—œæ³¨ã€‚',
    'å‹¾é™³': 'å»ºç«‹ç©©å®šå¯é çš„ç›¸è™•æ¨¡å¼å¾ˆé‡è¦ï¼ŒåŒæ™‚ä¹Ÿè¦å­¸æœƒåœ¨é—œä¿‚ä¸­é©æ™‚å±•ç¾è„†å¼±å’Œå°‹æ±‚æ”¯æŒã€‚',
    'è£è›‡': 'æ·±åº¦ç†è§£å’Œå¿ƒéˆå¥‘åˆæ˜¯é—œéµï¼Œå­¸ç¿’åœ¨æ•æ„Ÿæ„ŸçŸ¥ä»–äººéœ€æ±‚çš„åŒæ™‚ä¹Ÿæ˜ç¢ºè¡¨é”è‡ªå·±çš„é‚Šç•Œã€‚',
    'ç™½è™': 'è¡Œå‹•å‹æ–¼è¨€èªçš„è¡¨é”æ–¹å¼ï¼Œåœ¨å±•ç¾ä¿è­·åŠ›çš„åŒæ™‚ä¹Ÿè¦å­¸ç¿’è†è½å’Œå°Šé‡ä¼´ä¾¶çš„ç¨ç«‹æ€§ã€‚',
    'ç„æ­¦': 'éœ€è¦ç¨è™•æ€è€ƒçš„ç©ºé–“å’Œç†è§£ï¼Œåœ¨è¿½æ±‚æ·±åº¦äº¤æµçš„åŒæ™‚ä¹Ÿè¦å­¸ç¿’æƒ…æ„Ÿè¡¨é”å’Œå³æ™‚å›æ‡‰ã€‚'
  };
  return advice[beastType] || 'å»ºç«‹å¥åº·å¹³è¡¡çš„è¦ªå¯†é—œä¿‚éœ€è¦ç›¸äº’ç†è§£å’Œå°Šé‡ã€‚';
}

function getCompatibleTypes(beastType) {
  const compatibilities = {
    'é’é¾': ['å‹¾é™³å‹', 'ç„æ­¦å‹', 'è£è›‡å‹'],
    'æœ±é›€': ['ç„æ­¦å‹', 'ç™½è™å‹', 'é’é¾å‹'],
    'å‹¾é™³': ['é’é¾å‹', 'æœ±é›€å‹', 'è£è›‡å‹'],
    'è£è›‡': ['ç™½è™å‹', 'ç„æ­¦å‹', 'å‹¾é™³å‹'],
    'ç™½è™': ['è£è›‡å‹', 'æœ±é›€å‹', 'ç„æ­¦å‹'],
    'ç„æ­¦': ['æœ±é›€å‹', 'é’é¾å‹', 'ç™½è™å‹']
  };
  return compatibilities[beastType] || ['å¤šç¨®äººæ ¼é¡å‹'];
}

function getGrowthActions(beastType) {
  const actions = {
    'é’é¾': [
      'æ¯å¤©è¨­å®šå…·é«”çš„åŸ·è¡Œç›®æ¨™',
      'å­¸ç¿’æ™‚é–“ç®¡ç†å’Œå„ªå…ˆç´šæ’åº',
      'å»ºç«‹å‰µæ„é …ç›®çš„å®Œæˆå„€å¼',
      'ç·´ç¿’å°ˆæ³¨åŠ›è¨“ç·´å’Œå†¥æƒ³',
      'å°‹æ‰¾å‰µæ„è½åœ°çš„åˆä½œå¤¥ä¼´'
    ],
    'æœ±é›€': [
      'å»ºç«‹å€‹äººç¨è™•çš„å®šæœŸæ™‚é–“',
      'å­¸ç¿’æƒ…ç·’æ—¥è¨˜å’Œè‡ªæˆ‘åæ€',
      'ç™¼å±•ä¸ä¾è³´å¤–éƒ¨çš„è‡ªæˆ‘åƒ¹å€¼',
      'ç·´ç¿’è¨­å®šå¥åº·çš„äººéš›é‚Šç•Œ',
      'åŸ¹é¤Šå€‹äººèˆˆè¶£å’Œç¨ç«‹æ´»å‹•'
    ],
    'å‹¾é™³': [
      'æ¯é€±å˜—è©¦ä¸€ä»¶æ–°äº‹ç‰©',
      'å­¸ç¿’æ¥å—ä¸å®Œç¾å’ŒçŠ¯éŒ¯',
      'åƒèˆ‡å‰µæ„å’Œå†’éšªæ€§æ´»å‹•',
      'ç·´ç¿’éˆæ´»æ‡‰è®Šçš„æ€ç¶­æ¨¡å¼',
      'å°‹æ‰¾çªç ´èˆ’é©åœˆçš„æ©Ÿæœƒ'
    ],
    'è£è›‡': [
      'ç·´ç¿’ç›´æ¥è¡¨é”éœ€æ±‚å’Œæ„Ÿå—',
      'å­¸ç¿’èªª"ä¸"å’Œè¨­å®šç•Œé™',
      'ç™¼å±•å€‹äººæ±ºç­–çš„è‡ªä¿¡',
      'å¹³è¡¡ä»–äººéœ€æ±‚èˆ‡è‡ªæˆ‘éœ€æ±‚',
      'å»ºç«‹å€‹äººç›®æ¨™å’Œå„ªå…ˆäº‹é …'
    ],
    'ç™½è™': [
      'ç·´ç¿’è€å¿ƒè†è½å’Œåœ˜éšŠåˆä½œ',
      'å­¸ç¿’æˆæ¬Šå’Œä¿¡ä»»ä»–äºº',
      'ç™¼å±•åŒç†å¿ƒå’Œæƒ…æ„Ÿæ™ºæ…§',
      'åŸ¹é¤Šç´°ç·»è§€å¯Ÿçš„ç¿’æ…£',
      'ç·´ç¿’ç­‰å¾…å’Œæ™‚æ©ŸæŠŠæ¡'
    ],
    'ç„æ­¦': [
      'è¨­å®šè¡Œå‹•æˆªæ­¢æ—¥æœŸ',
      'ç·´ç¿’å³æ™‚æ±ºç­–å’Œè¡Œå‹•',
      'ç™¼å±•æƒ…æ„Ÿè¡¨é”èƒ½åŠ›',
      'åƒèˆ‡åœ˜éšŠåˆä½œé …ç›®',
      'å¹³è¡¡æ€è€ƒèˆ‡å¯¦è¸æ™‚é–“'
    ]
  };
  return actions[beastType] || ['æŒçºŒçš„è‡ªæˆ‘è¦ºå¯Ÿå’Œæ”¹é€²'];
}

function getWeaknessDevelopment(beastType) {
  const developments = {
    'é’é¾': 'å¯ä»¥é€éçµæ§‹åŒ–å­¸ç¿’å’Œå°ˆæ³¨è¨“ç·´ä¾†ç™¼å±•åŸ·è¡ŒåŠ›ï¼Œå°‡å‰µæ„è½‰åŒ–ç‚ºå¯¦éš›æˆæœã€‚',
    'æœ±é›€': 'å¯ä»¥é€éç¨è™•åæ€å’Œå…§åœ¨æ¢ç´¢ä¾†ç™¼å±•è‡ªæˆ‘èªçŸ¥ï¼Œå»ºç«‹æ›´ç©©å®šçš„å…§åœ¨åŸºç¤ã€‚',
    'å‹¾é™³': 'å¯ä»¥é€éå†’éšªé«”é©—å’Œå‰µæ–°æŒ‘æˆ°ä¾†ç™¼å±•é©æ‡‰åŠ›ï¼Œæ“æŠ±è®ŠåŒ–å’Œä¸ç¢ºå®šæ€§ã€‚',
    'è£è›‡': 'å¯ä»¥é€éè‡ªä¿¡è¨“ç·´å’Œé‚Šç•Œè¨­å®šä¾†ç™¼å±•è‡ªæˆ‘è‚¯å®šï¼Œå¹³è¡¡ä»˜å‡ºèˆ‡æ¥æ”¶ã€‚',
    'ç™½è™': 'å¯ä»¥é€éåœ˜éšŠåˆä½œå’Œè€å¿ƒç·´ç¿’ä¾†ç™¼å±•å”ä½œåŠ›ï¼Œå­¸ç¿’ä¿¡ä»»å’Œæˆæ¬Šã€‚',
    'ç„æ­¦': 'å¯ä»¥é€éè¡Œå‹•å¯¦è¸å’Œæƒ…æ„Ÿè¡¨é”ä¾†ç™¼å±•åŸ·è¡ŒåŠ›ï¼Œå¹³è¡¡æ€è€ƒèˆ‡è¡Œå‹•ã€‚'
  };
  return developments[beastType] || 'é€éæœ‰æ„è­˜çš„ç·´ç¿’å¯ä»¥ç™¼å±•ç›¸é—œèƒ½åŠ›ã€‚';
}

function getWealthEnergy(beastType) {
  const energies = {
    'é’é¾': 'è²¡å¯Œèƒ½é‡å¦‚æ´»æ°´æºé ­ï¼Œæºæºä¸çµ•ä½†éœ€è¦æ­£ç¢ºå¼•å°ã€‚é©åˆé–‹å‰µæ€§æŠ•è³‡å’Œå‰µæ–°é …ç›®ã€‚',
    'æœ±é›€': 'è²¡å¯Œèƒ½é‡å¦‚ç«ç„°ç‡ƒç‡’ï¼Œç†±æƒ…æ—ºç››ä½†éœ€è¦ç©©å®šç‡ƒæ–™ã€‚é©åˆäººè„ˆç›¸é—œå’Œæœå‹™æ€§è¡Œæ¥­ã€‚',
    'å‹¾é™³': 'è²¡å¯Œèƒ½é‡å¦‚å¤§åœ°ç©ç´¯ï¼Œç©©å®šå¢é•·ä½†éœ€è¦é©æ™‚çªç ´ã€‚é©åˆé•·æœŸæŠ•è³‡å’Œå¯¦é«”ç”¢æ¥­ã€‚',
    'è£è›‡': 'è²¡å¯Œèƒ½é‡å¦‚é¢¨ä¹‹æµå‹•ï¼Œéˆæ´»å¤šè®Šä½†éœ€è¦æŠŠæ¡æ™‚æ©Ÿã€‚é©åˆæ™‚æ©Ÿæ€§æŠ•è³‡å’Œä¸­ä»‹æœå‹™ã€‚',
    'ç™½è™': 'è²¡å¯Œèƒ½é‡å¦‚é›·ä¹‹è¿…çŒ›ï¼Œå¿«é€Ÿç²å–ä½†éœ€è¦é¢¨éšªæ§åˆ¶ã€‚é©åˆä¸»å‹•å‡ºæ“Šå’Œé«˜å›å ±æŠ•è³‡ã€‚',
    'ç„æ­¦': 'è²¡å¯Œèƒ½é‡å¦‚æ°´ä¹‹æ·±è—ï¼Œæ™ºæ…§ç©ç´¯ä½†éœ€è¦è¡Œå‹•å¯¦è¸ã€‚é©åˆç ”ç©¶å‹æŠ•è³‡å’ŒæŠ€è¡“é ˜åŸŸã€‚'
  };
  return energies[beastType] || 'å…·æœ‰ç¨ç‰¹çš„è²¡å¯Œå‰µé€ æ¨¡å¼ã€‚';
}

function getSuitableInvestments(beastType) {
  const investments = {
    'é’é¾': 'æ–°å‰µå…¬å¸ã€ç§‘æŠ€è‚¡ã€å‰µæ„ç”¢æ¥­ã€æ•™è‚²åŸ¹è¨“ã€å€‹äººå“ç‰Œ',
    'æœ±é›€': 'æœå‹™æ¥­ã€å¨›æ¨‚ç”¢æ¥­ã€å…¬é—œå…¬å¸ã€æ•™è‚²æ©Ÿæ§‹ã€ç¤¾äº¤å¹³å°',
    'å‹¾é™³': 'æˆ¿åœ°ç”¢ã€åŸºç¤å»ºè¨­ã€å…¬ç”¨äº‹æ¥­ã€å‚³çµ±è£½é€ ã€å„²è“„ä¿éšª',
    'è£è›‡': 'ä¸­ä»‹æœå‹™ã€è«®è©¢æ¥­ã€äººåŠ›è³‡æºã€å¿ƒç†æœå‹™ã€æ™‚æ©Ÿæ€§æŠ•è³‡',
    'ç™½è™': 'ä¸»å‹•æŠ•è³‡ã€å‰µæ¥­é …ç›®ã€é«”è‚²ç”¢æ¥­ã€è»å·¥è‚¡ã€æ€¥é›£æ•‘åŠ©',
    'ç„æ­¦': 'ç ”ç©¶é–‹ç™¼ã€æŠ€è¡“å°ˆåˆ©ã€æ•¸æ“šåˆ†æã€é¢¨éšªæŠ•è³‡ã€é•·æœŸæŒè‚¡'
  };
  return investments[beastType] || 'å¤šå…ƒåŒ–çš„æŠ•è³‡çµ„åˆ';
}

function getWealthDevelopmentTips(beastType) {
  const tips = {
    'é’é¾': 'å»ºè­°å°‡å‰µæ„èˆ‡å•†æ¥­æ¨¡å¼çµåˆï¼Œå°‹æ‰¾å¯é çš„åˆä½œå¤¥ä¼´ä¾†å”åŠ©åŸ·è¡Œï¼Œé¿å…éåº¦åˆ†æ•£æŠ•è³‡ã€‚',
    'æœ±é›€': 'å»ºè­°åˆ©ç”¨äººè„ˆè³‡æºç™¼å±•äº‹æ¥­ï¼Œå»ºç«‹å€‹äººå“ç‰Œå½±éŸ¿åŠ›ï¼ŒåŒæ™‚æ³¨æ„è²¡å‹™ç´€å¾‹å’Œå„²è“„è¨ˆåŠƒã€‚',
    'å‹¾é™³': 'å»ºè­°æ¡å–ç©©å¥çš„è²¡å¯Œç©ç´¯ç­–ç•¥ï¼Œé©æ™‚æŠ•è³‡å‰µæ–°é ˜åŸŸï¼Œé¿å…éåº¦ä¿å®ˆéŒ¯å¤±æ©Ÿæœƒã€‚',
    'è£è›‡': 'å»ºè­°æŠŠæ¡å¸‚å ´æ™‚æ©Ÿé€²è¡ŒæŠ•è³‡ï¼Œç™¼å±•è«®è©¢æˆ–ä¸­ä»‹æœå‹™ï¼ŒåŒæ™‚å»ºç«‹æ˜ç¢ºçš„è²¡å‹™ç›®æ¨™ã€‚',
    'ç™½è™': 'å»ºè­°æ¡å–ç©æ¥µçš„è²¡å¯Œå‰µé€ ç­–ç•¥ï¼Œæ§åˆ¶æŠ•è³‡é¢¨éšªï¼Œå­¸ç¿’é•·æœŸè²¡å¯Œè¦åŠƒçš„é‡è¦æ€§ã€‚',
    'ç„æ­¦': 'å»ºè­°é€²è¡Œæ·±åº¦å¸‚å ´ç ”ç©¶å¾ŒæŠ•è³‡ï¼Œç™¼å±•å°ˆæ¥­æŠ€è¡“æˆ–çŸ¥è­˜è®Šç¾ï¼Œå¹³è¡¡åˆ†æèˆ‡è¡Œå‹•ã€‚'
  };
  return tips[beastType] || 'å»ºç«‹ç³»çµ±æ€§çš„è²¡å¯Œç®¡ç†è¨ˆåŠƒæ˜¯é—œéµã€‚';
}

function getCrossFieldPotential(beastType) {
  return `æ‚¨çš„${beastType}ç‰¹è³ªè®“æ‚¨åœ¨è·¨é ˜åŸŸç™¼å±•ä¸­å…·æœ‰ç¨ç‰¹å„ªå‹¢ï¼Œèƒ½å¤ å°‡ä¸åŒé ˜åŸŸçš„çŸ¥è­˜å’ŒæŠ€èƒ½å‰µé€ æ€§åœ°çµåˆï¼Œé–‹å‰µæ–°çš„å¯èƒ½æ€§ã€‚`;
}

// ========== AIåˆ†æ ==========
function generateAIAnalysis() {
  const saved = JSON.parse(localStorage.getItem("shen-shou-result") || "null");
  if (!saved) {
    alert("âš ï¸è«‹å…ˆå®Œæˆæ¸¬é©—ã€‚");
    return;
  }
  
  const loadingEl = document.getElementById("ai-loading");
  const contentEl = document.getElementById("ai-analysis-content");
  const btnAI = document.getElementById("btnAI");
  const btnRetry = document.getElementById("btnRetry");
  
  loadingEl.style.display = "block";
  contentEl.style.display = "none";
  btnRetry.style.display = "none";
  btnAI.disabled = true;
  
  simulateProgress();
  
  // æ¨¡æ“¬AIåˆ†æéç¨‹
  setTimeout(() => {
    fillAIAnalysis(saved.summary.top);
    
    loadingEl.style.display = "none";
    contentEl.style.display = "block";
    btnRetry.style.display = "inline-block";
    btnAI.disabled = false;
  }, 3000);
}

function simulateProgress() {
  const progressBar = document.getElementById("progress-bar");
  const loadingStep = document.getElementById("loading-step");
  const steps = [
    {percent: 20, text: "åˆ†æäººæ ¼ç‰¹è³ª..."},
    {percent: 40, text: "è§£æèƒ½é‡åˆ†å¸ƒ..."},
    {percent: 60, text: "ç”Ÿæˆç™¼å±•å»ºè­°..."},
    {percent: 80, text: "è¨ˆç®—äº”è¡Œé‡‘éŒ¢å¦..."},
    {percent: 95, text: "æœ€çµ‚æ•´åˆå ±å‘Š..."},
    {percent: 100, text: "åˆ†æå®Œæˆï¼"}
  ];
  
  let currentStep = 0;
  const interval = setInterval(() => {
    if (currentStep < steps.length) {
      progressBar.style.width = steps[currentStep].percent + "%";
      loadingStep.textContent = steps[currentStep].text;
      currentStep++;
    } else {
      clearInterval(interval);
    }
  }, 500);
}

// ========== åˆ†äº«åŠŸèƒ½ ==========
function shareResult() {
  html2canvas(document.getElementById("result")).then(canvas => {
    const link = document.createElement("a");
    link.download = "shenshou-result.png";
    link.href = canvas.toDataURL();
    link.click();
  });
}

// ========== åˆ—å°åŠŸèƒ½ ==========
function printAnalysis() {
  // ç°¡å–®çš„åˆ—å°åŠŸèƒ½
  window.print();
}

// å…¨åŸŸè®Šæ•¸
window.currentBeastType = '';
</script>
</body>
</html>
