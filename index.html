<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ç¥ç¸ä¸ƒåäºŒå‹äººæ ¼ï½œåˆ†æå¸«éˆæ°£ç‰¹æ•ˆç‰ˆ</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body {
  margin: 0;
  font-family: "Noto Sans TC","Microsoft JhengHei",sans-serif;
  overflow-x: hidden;
}
canvas#energyField {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}
main { position: relative; z-index: 1; }
.card { background: rgba(255,255,255,0.9); border-radius: 1rem; border: 1px solid #e2e8f0; box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
.brand-bg { background: linear-gradient(135deg,#f59e0b,#f97316); }
.brand { color: #b45309; }
.no-print { display: block; }
@media print {
  .no-print, #adminSection, #btnGear { display:none!important; }
  body { background:white!important; }
}
</style>
</head>

<body class="bg-[#f6f7fb] text-slate-800 transition-colors duration-500" id="bodyRoot">
<canvas id="energyField"></canvas>

<main class="max-w-6xl mx-auto p-4 sm:p-6 relative">
  <!-- âš™ï¸ é½’è¼ª -->
  <button id="btnGear" title="åˆ†æå¸«è¨­å®š" class="fixed top-4 right-4 z-50 bg-white border rounded-full p-2 shadow-lg hover:rotate-90 transition-transform">âš™ï¸</button>

  <!-- æ¨™é¡Œ -->
  <header class="mb-4 sm:mb-6">
    <div class="flex items-center gap-3">
      <img data-logo alt="ä»™äººæŒ‡è·¯ Logo" class="h-10 w-auto rounded">
      <div>
        <h1 class="text-2xl sm:text-3xl font-extrabold brand">ç¥ç¸ä¸ƒåäºŒå‹äººæ ¼ æ¸¬é©—ï¼‹æ™ºèƒ½å ±è¡¨</h1>
        <p class="text-slate-600 text-sm">å…­ç¸é›·é”åœ–ãƒ»ä¸»ç¥ç¸è§£æãƒ»ä¸‰æ¬„å»ºè­°ãƒ»åˆ†æå¸«å¡</p>
      </div>
    </div>
  </header>

  <!-- å ±è¡¨ -->
  <section id="result" class="mt-6 grid lg:grid-cols-2 gap-4">
    <div class="card p-4 sm:p-5 page">
      <h2 class="text-lg font-bold mb-3">å…­ç¸èƒ½é‡é›·é”åœ–</h2>
      <canvas id="radar"></canvas>
      <div class="flex flex-wrap gap-2 mt-4 no-print">
        <button id="btnDownloadPNG" class="px-4 py-2 bg-amber-600 text-white rounded-lg">ä¸‹è¼‰çµæœå¡ PNG</button>
        <button id="btnPrint" class="px-4 py-2 border rounded-lg">åˆ—å°å ±è¡¨</button>
      </div>
    </div>

    <div class="card p-4 sm:p-5 page report" id="resultCard">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-bold">ä¸»ç¥ç¸çµæœèˆ‡ä¸‰æ¬„å»ºè­°</h2>
        <img data-logo alt="Logo" class="h-8 w-auto">
      </div>
      <div class="grid grid-cols-3 gap-3 items-start mt-2">
        <div id="beastSVG" class="w-full aspect-square"></div>
        <div class="col-span-2">
          <div id="mainBeastTitle" class="text-base font-semibold brand">æœ±é›€å‹</div>
          <div id="dualHint" class="mt-1 text-sm text-slate-600">æƒ…æ„Ÿèˆ‡è¡¨é”ä¸¦é‡çš„éˆæ„Ÿå‹</div>
          <div id="mainBeastSummary" class="mt-2 text-sm">ä»¥ç†±æƒ…èˆ‡å‰µæ„é©…å‹•ï¼Œé©åˆè¬›å¸«ã€è¡ŒéŠ·ã€é¡§å•ã€‚</div>
        </div>
      </div>
      <hr class="my-3">
      <div id="adviceCols" class="grid md:grid-cols-3 gap-3 text-sm">
        <div><b>å„ªå‹¢ï¼š</b> ç†±æƒ…è¡¨é”ã€é¼“èˆäººå¿ƒã€‚</div>
        <div><b>æŒ‘æˆ°ï¼š</b> æ˜“æƒ…ç·’åŒ–ã€éœ€è¦ç©©å®šç¯€å¥ã€‚</div>
        <div><b>å»ºè­°ï¼š</b> ç·´ç¿’å‚¾è½èˆ‡è€å¿ƒï¼Œå°‡éˆæ„ŸåŒ–ç‚ºå¯¦è¸ã€‚</div>
      </div>
      <hr class="my-3">
      <div class="grid md:grid-cols-3 gap-3">
        <div class="md:col-span-2">
          <h3 class="text-base font-bold mb-1">ğŸ‘¤ åˆ†æå¸«è³‡æ–™</h3>
          <div class="grid sm:grid-cols-2 gap-2">
            <div><div class="text-xs text-slate-500">å§“å</div><div id="instName" class="font-medium">æ—è”šé’ é˜¿é’å¸«</div></div>
            <div><div class="text-xs text-slate-500">è¯çµ¡</div><div id="instContact" class="font-medium">LINEï¼š@chin573365</div></div>
          </div>
          <div class="mt-2">
            <div class="text-xs text-slate-500">è‡ªæˆ‘ä»‹ç´¹</div>
            <div id="instBio" class="text-sm">ä»¥é‡‘éŒ¢å¦ç‚ºæ ¸å¿ƒï¼Œèåˆä¸­é†«äº”è¡Œï¼ŒæŒ‡å¼•äººç”Ÿæ–¹å‘ã€‚</div>
          </div>
        </div>
        <div class="flex items-center justify-center">
          <div class="text-center">
            <div class="text-xs text-slate-500 mb-1">åˆ†æå¸« QR</div>
            <img id="instQRPreview" src="" alt="åˆ†æå¸«QR" class="h-28 w-28 object-contain border rounded mx-auto">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- âš™ï¸ è¨­å®šå€ -->
  <section id="adminSection" class="hidden fixed bottom-4 right-4 bg-white/95 backdrop-blur-md p-4 rounded-xl border shadow-2xl w-[360px] max-h-[90vh] overflow-auto">
    <h2 class="text-lg font-bold mb-2">åˆ†æå¸«è¨­å®š</h2>
    <div class="grid sm:grid-cols-2 gap-3 text-sm">
      <div><label class="text-xs text-slate-500">å§“å</label><input id="fName" class="w-full px-2 py-1 border rounded"></div>
      <div><label class="text-xs text-slate-500">è¯çµ¡</label><input id="fContact" class="w-full px-2 py-1 border rounded"></div>
    </div>
    <div class="mt-2"><label class="text-xs text-slate-500">è‡ªæˆ‘ä»‹ç´¹</label><textarea id="fBio" rows="2" class="w-full px-2 py-1 border rounded"></textarea></div>
    <div class="mt-2"><label class="text-xs text-slate-500 block">ä¸Šå‚³QR</label><input id="fQR" type="file" accept="image/*" class="block text-xs"></div>
    <hr class="my-2">
    <h3 class="text-sm font-bold">ğŸ¨ èƒŒæ™¯è¨­å®š</h3>
    <div class="flex items-center gap-2 mt-1">
      <label class="text-xs text-slate-500">å·¦</label><input type="color" id="gradLeft" class="w-10 h-10 border rounded">
      <label class="text-xs text-slate-500">å³</label><input type="color" id="gradRight" class="w-10 h-10 border rounded">
    </div>
    <div class="mt-2"><label class="text-xs text-slate-500 block">èƒŒæ™¯åœ–ç‰‡</label><input id="bgImageInput" type="file" accept="image/*" class="block text-xs"></div>
    <div class="flex items-center gap-2 mt-2">
      <label class="text-xs text-slate-500">é€æ˜åº¦</label><input type="range" id="bgOpacity" min="0.2" max="1" step="0.1" value="1" class="w-full">
    </div>
    <button id="btnResetBg" class="text-xs border px-2 py-1 mt-2 rounded">é‡è¨­èƒŒæ™¯</button>
  </section>
</main>

<script>
/* âš™ï¸ é–‹é—œè¨­å®š */
document.getElementById('btnGear').addEventListener('click',()=>document.getElementById('adminSection').classList.toggle('hidden'));

/* èƒŒæ™¯è¨­å®šèˆ‡ä¿å­˜ */
const bodyRoot=document.getElementById('bodyRoot');
const gradL=document.getElementById('gradLeft');
const gradR=document.getElementById('gradRight');
const bgImg=document.getElementById('bgImageInput');
const bgOp=document.getElementById('bgOpacity');
const btnReset=document.getElementById('btnResetBg');

let styleData=JSON.parse(localStorage.getItem('shen-shou-style')||'{}');
applyStyle(styleData);

function applyStyle(d){
  if(d.gradL&&d.gradR) bodyRoot.style.background=`linear-gradient(135deg,${d.gradL},${d.gradR})`;
  if(d.bgImg){ bodyRoot.style.backgroundImage=`url(${d.bgImg})`; bodyRoot.style.backgroundSize='cover'; bodyRoot.style.backgroundAttachment='fixed';}
  bodyRoot.style.opacity=d.opacity||1;
  gradL.value=d.gradL||'#f6f7fb'; gradR.value=d.gradR||'#ffffff'; bgOp.value=d.opacity||1;
}
function saveStyle(){ localStorage.setItem('shen-shou-style',JSON.stringify(styleData)); }

gradL.oninput=e=>{styleData.gradL=e.target.value;applyStyle(styleData);saveStyle();}
gradR.oninput=e=>{styleData.gradR=e.target.value;applyStyle(styleData);saveStyle();}
bgImg.onchange=e=>{const f=e.target.files[0];if(!f)return;const r=new FileReader();r.onload=()=>{styleData.bgImg=r.result;applyStyle(styleData);saveStyle();};r.readAsDataURL(f);}
bgOp.oninput=e=>{styleData.opacity=e.target.value;bodyRoot.style.opacity=styleData.opacity;saveStyle();}
btnReset.onclick=()=>{styleData={};localStorage.removeItem('shen-shou-style');bodyRoot.style.background='#f6f7fb';bodyRoot.style.backgroundImage='';bodyRoot.style.opacity=1;};

/* ğŸª¶ ç¥ç¸èƒ½é‡å…‰æšˆç‰¹æ•ˆ */
const canvas=document.getElementById('energyField');
const ctx=canvas.getContext('2d');
let W,H,particles=[];
function resize(){W=canvas.width=window.innerWidth;H=canvas.height=window.innerHeight;}
window.addEventListener('resize',resize);resize();

for(let i=0;i<60;i++){
  particles.push({
    x:Math.random()*W,
    y:Math.random()*H,
    r:Math.random()*2+0.5,
    dx:(Math.random()-0.5)*0.3,
    dy:(Math.random()-0.5)*0.3,
    color:`hsla(${Math.random()*360},80%,70%,0.6)`
  });
}

function draw(){
  ctx.clearRect(0,0,W,H);
  for(let p of particles){
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,2*Math.PI);
    ctx.fillStyle=p.color;
    ctx.fill();
    p.x+=p.dx;p.y+=p.dy;
    if(p.x<0||p.x>W)p.dx*=-1;
    if(p.y<0||p.y>H)p.dy*=-1;
  }
  requestAnimationFrame(draw);
}
draw();
</script>
</body>
</html>
